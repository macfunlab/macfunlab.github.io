function onYouTubePlayerAPIReady(){ytp.YTAPIReady||(ytp.YTAPIReady=!0,jQuery(document).trigger("YTAPIReady"))}function mr_parallax(){"use strict";function e(e){for(var t=0;t<e.length;t++)if("undefined"!=typeof document.body.style[e[t]])return e[t];return null}function t(){var e,t=0;return u()?(t=jQuery(".viu").find("nav:first").outerHeight(!0),e=jQuery(".viu").find("nav:first").css("position"),("absolute"===e||"fixed"===e)&&(t=0)):t=jQuery(document).find("nav:first").outerHeight(!0),t}function i(e,t,i,r){var n=e-1;return n/=r,e/=r,n--,e--,i*(e*e*e*e*e+1)+t-(i*(n*n*n*n*n+1)+t)}function r(){if(k){for(var e=d.length,t=a();e--;)n(d[e],t,h,m);k=!1}g&&(I+=-P*i(T,0,Q,C),(I>S||-S>I)&&($.scrollBy(0,I),I=0),T++,T>C&&(T=0,g=!1,b=!0,P=0,w=0,Y=0,I=0)),c(r)}function n(e,t,i,r){var n=u();n?t+y-v>e.elemTop&&t-v<e.elemBottom&&(e.isFirstSection?e.imageHolder.style[f]=i+t/2+r:e.imageHolder.style[f]=i+(t-e.elemTop-v)/2+r):t+y>e.elemTop&&t<e.elemBottom&&(e.isFirstSection?e.imageHolder.style[f]=i+t/2+r:e.imageHolder.style[f]=i+(t+y-e.elemTop)/2+r)}function a(){return $!=window?$.scrollTop:0===document.documentElement.scrollTop?document.body.scrollTop:document.documentElement.scrollTop}function o(){k=!0}function s(e){e.preventDefault&&e.preventDefault(),P=e.notRealWheel?-e.deltaY/4:1==e.deltaMode?-e.deltaY/3:100===Math.abs(e.deltaY)?-e.deltaY/120:-e.deltaY/40,P=-x>P?-x:P,P=P>x?x:P,g=!0,T=j}function l(e){var t={};return e&&"[object Function]"===t.toString.call(e)}function u(){return"undefined"==typeof window.mr_variant?!1:!0}var d,c=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,p=["transform","msTransform","webkitTransform","mozTransform","oTransform"],f=e(p),h="translate3d(0,",m="px,0)",y=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=0,g=!1,b=!0,T=0,P=0,w=0,Y=0,x=2,j=4,Q=300,S=1,C=30,I=0,$=window,k=(u(),!1),_=this;jQuery(document).ready(function(){_.documentReady()}),jQuery(window).load(function(){_.windowLoad()}),this.getScrollingState=function(){return T>0?!0:!1},this.documentReady=function(e){return y=Math.max(document.documentElement.clientHeight,window.innerHeight||0),jQuery("body").hasClass("parallax-2d")&&(h="translate(0,",m="px)"),/Android|iPad|iPhone|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)?jQuery(".parallax").removeClass("parallax"):c&&(_.profileParallaxElements(),_.setupParallax()),l(e)?void e():void 0},this.windowLoad=function(){y=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=t(),window.mr_parallax.profileParallaxElements()},this.setupParallax=function(){u()&&($=jQuery(".viu").get(0),"undefined"!=typeof $&&($.scrollBy=function(e,t){this.scrollTop+=t,this.scrollLeft+=e})),"undefined"!=typeof $&&($.addEventListener("scroll",o,!1),window.addWheelListener($,s,!1),window.addEventListener("resize",function(){y=Math.max(document.documentElement.clientHeight,window.innerHeight||0),v=t(),_.profileParallaxElements()},!1),r())},this.profileParallaxElements=function(){d=[],v=t();var e=u(),i=".parallax > .background-image-holder, .parallax ul.slides > li > .background-image-holder";e&&(i=".viu .parallax > .background-image-holder, .viu .parallax ul.slides > li > .background-image-holder"),jQuery(i).each(function(t){var i=jQuery(this).closest(".parallax"),r=e?i.position().top:i.offset().top;d.push({section:i.get(0),outerHeight:i.outerHeight(),elemTop:r,elemBottom:r+i.outerHeight(),isFirstSection:i.is(":nth-of-type(1)")?!0:!1,imageHolder:jQuery(this).get(0)}),e?e&&(i.is(":nth-of-type(1)")?_.mr_setTranslate3DTransform(jQuery(this).get(0),0===a()?0:a()/2):_.mr_setTranslate3DTransform(jQuery(this).get(0),(a()-r-v)/2)):i.is(":nth-of-type(1)")?_.mr_setTranslate3DTransform(jQuery(this).get(0),0===a()?0:a()/2):_.mr_setTranslate3DTransform(jQuery(this).get(0),(a()+y-r)/2)})},this.mr_setTranslate3DTransform=function(e,t){e.style[f]=h+t+m}}function updateNav(){var e=mr_scrollTop;if(0>=e)return mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight")),void(mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled")));if(e>mr_firstSectionHeight){if(!mr_navScrolled)return mr_nav.addClass("scrolled"),void(mr_navScrolled=!0)}else e>mr_navOuterHeight?(mr_navFixed||(mr_nav.addClass("fixed"),mr_navFixed=!0),e>2*mr_navOuterHeight?mr_outOfSight||(mr_nav.addClass("outOfSight"),mr_outOfSight=!0):mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))):(mr_navFixed&&(mr_navFixed=!1,mr_nav.removeClass("fixed")),mr_outOfSight&&(mr_outOfSight=!1,mr_nav.removeClass("outOfSight"))),mr_navScrolled&&(mr_navScrolled=!1,mr_nav.removeClass("scrolled"))}function capitaliseFirstLetter(e){return e.charAt(0).toUpperCase()+e.slice(1)}function masonryFlyIn(){var e=$(".masonryFlyIn .masonry-item"),t=0;e.each(function(){var e=$(this);setTimeout(function(){e.addClass("fadeIn")},t),t+=170})}function setupFloatingProjectFilters(){mr_floatingProjectSections=[],$(".filters.floating").closest("section").each(function(){var e=$(this);mr_floatingProjectSections.push({section:e.get(0),outerHeight:e.outerHeight(),elemTop:e.offset().top,elemBottom:e.offset().top+e.outerHeight(),filters:e.find(".filters.floating"),filersHeight:e.find(".filters.floating").outerHeight(!0)})})}function updateFloatingFilters(){for(var e=mr_floatingProjectSections.length;e--;){var t=mr_floatingProjectSections[e];t.elemTop<mr_scrollTop&&"undefined"==typeof window.mr_variant?(t.filters.css({position:"fixed",top:"16px",bottom:"auto"}),mr_navScrolled&&t.filters.css({transform:"translate3d(-50%,48px,0)"}),mr_scrollTop>t.elemBottom-70&&(t.filters.css({position:"absolute",bottom:"16px",top:"auto"}),t.filters.css({transform:"translate3d(-50%,0,0)"}))):t.filters.css({position:"absolute",transform:"translate3d(-50%,0,0)"})}}function prepareSignup(e){var t=jQuery("<form />"),i=e.contents().find("form").attr("action");return/list-manage\.com/.test(i)&&(i=i.replace("/post?","/post-json?")+"&c=?","//"==i.substr(0,2)&&(i="http:"+i)),/createsend\.com/.test(i)&&(i+="?callback=?"),t.attr("action",i),e.contents().find("input, select, textarea").not('input[type="submit"]').each(function(){$(this).clone().appendTo(t)}),t}!function(e,t){"use strict";var i=function(e,i){var r=["http://api.flickr.com/services/feeds/photoset.gne?nsid=",i.id,"&set=",i.setId,"&format=json&jsoncallback=?"].join("");return t.getJSON(r).done(function(r){t.each(r.items,function(r,n){var a=n.media.m.replace("_m","_b");t("<img />").attr("src",n.media.m).appendTo(e).wrap(i.container||"").wrap(['<a data-lightbox="true" href="',a,i.cssClass?'" class="'+i.cssClass:"",'" title="',n.title,'"></a>'].join(""))})})};t.fn.flickrPhotoStream=function(e){return i(t(this).get(),e||{})}}(document,jQuery),!function(e){e.flexslider=function(t,i){var r=e(t);r.vars=e.extend({},e.flexslider.defaults,i);var n,a=r.vars.namespace,o=window.navigator&&window.navigator.msPointerEnabled&&window.MSGesture,s=("ontouchstart"in window||o||window.DocumentTouch&&document instanceof DocumentTouch)&&r.vars.touch,l="click touchend MSPointerUp keyup",u="",d="vertical"===r.vars.direction,c=r.vars.reverse,p=r.vars.itemWidth>0,f="fade"===r.vars.animation,h=""!==r.vars.asNavFor,m={},y=!0;e.data(t,"flexslider",r),m={init:function(){r.animating=!1,r.currentSlide=parseInt(r.vars.startAt?r.vars.startAt:0,10),isNaN(r.currentSlide)&&(r.currentSlide=0),r.animatingTo=r.currentSlide,r.atEnd=0===r.currentSlide||r.currentSlide===r.last,r.containerSelector=r.vars.selector.substr(0,r.vars.selector.search(" ")),r.slides=e(r.vars.selector,r),r.container=e(r.containerSelector,r),r.count=r.slides.length,r.syncExists=e(r.vars.sync).length>0,"slide"===r.vars.animation&&(r.vars.animation="swing"),r.prop=d?"top":"marginLeft",r.args={},r.manualPause=!1,r.stopped=!1,r.started=!1,r.startTimeout=null,r.transitions=!r.vars.video&&!f&&r.vars.useCSS&&function(){var e=document.createElement("div"),t=["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"];for(var i in t)if(void 0!==e.style[t[i]])return r.pfx=t[i].replace("Perspective","").toLowerCase(),r.prop="-"+r.pfx+"-transform",!0;return!1}(),r.ensureAnimationEnd="",""!==r.vars.controlsContainer&&(r.controlsContainer=e(r.vars.controlsContainer).length>0&&e(r.vars.controlsContainer)),""!==r.vars.manualControls&&(r.manualControls=e(r.vars.manualControls).length>0&&e(r.vars.manualControls)),r.vars.randomize&&(r.slides.sort(function(){return Math.round(Math.random())-.5}),r.container.empty().append(r.slides)),r.doMath(),r.setup("init"),r.vars.controlNav&&m.controlNav.setup(),r.vars.directionNav&&m.directionNav.setup(),r.vars.keyboard&&(1===e(r.containerSelector).length||r.vars.multipleKeyboard)&&e(document).bind("keyup",function(e){var t=e.keyCode;if(!r.animating&&(39===t||37===t)){var i=39===t?r.getTarget("next"):37===t?r.getTarget("prev"):!1;r.flexAnimate(i,r.vars.pauseOnAction)}}),r.vars.mousewheel&&r.bind("mousewheel",function(e,t,i,n){e.preventDefault();var a=r.getTarget(0>t?"next":"prev");r.flexAnimate(a,r.vars.pauseOnAction)}),r.vars.pausePlay&&m.pausePlay.setup(),r.vars.slideshow&&r.vars.pauseInvisible&&m.pauseInvisible.init(),r.vars.slideshow&&(r.vars.pauseOnHover&&r.hover(function(){r.manualPlay||r.manualPause||r.pause()},function(){r.manualPause||r.manualPlay||r.stopped||r.play()}),r.vars.pauseInvisible&&m.pauseInvisible.isHidden()||(r.vars.initDelay>0?r.startTimeout=setTimeout(r.play,r.vars.initDelay):r.play())),h&&m.asNav.setup(),s&&r.vars.touch&&m.touch(),(!f||f&&r.vars.smoothHeight)&&e(window).bind("resize orientationchange focus",m.resize),r.find("img").attr("draggable","false"),setTimeout(function(){r.vars.start(r)},200)},asNav:{setup:function(){r.asNav=!0,r.animatingTo=Math.floor(r.currentSlide/r.move),r.currentItem=r.currentSlide,r.slides.removeClass(a+"active-slide").eq(r.currentItem).addClass(a+"active-slide"),o?(t._slider=r,r.slides.each(function(){var t=this;t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",function(e){e.preventDefault(),e.currentTarget._gesture&&e.currentTarget._gesture.addPointer(e.pointerId)},!1),t.addEventListener("MSGestureTap",function(t){t.preventDefault();var i=e(this),n=i.index();e(r.vars.asNavFor).data("flexslider").animating||i.hasClass("active")||(r.direction=r.currentItem<n?"next":"prev",r.flexAnimate(n,r.vars.pauseOnAction,!1,!0,!0))})})):r.slides.on(l,function(t){t.preventDefault();var i=e(this),n=i.index(),o=i.offset().left-e(r).scrollLeft();0>=o&&i.hasClass(a+"active-slide")?r.flexAnimate(r.getTarget("prev"),!0):e(r.vars.asNavFor).data("flexslider").animating||i.hasClass(a+"active-slide")||(r.direction=r.currentItem<n?"next":"prev",r.flexAnimate(n,r.vars.pauseOnAction,!1,!0,!0))})}},controlNav:{setup:function(){r.manualControls?m.controlNav.setupManual():m.controlNav.setupPaging()},setupPaging:function(){var t,i,n="thumbnails"===r.vars.controlNav?"control-thumbs":"control-paging",o=1;if(r.controlNavScaffold=e('<ol class="'+a+"control-nav "+a+n+'"></ol>'),r.pagingCount>1)for(var s=0;s<r.pagingCount;s++){if(i=r.slides.eq(s),t="thumbnails"===r.vars.controlNav?'<img src="'+i.attr("data-thumb")+'"/>':"<a>"+o+"</a>","thumbnails"===r.vars.controlNav&&!0===r.vars.thumbCaptions){var d=i.attr("data-thumbcaption");""!=d&&void 0!=d&&(t+='<span class="'+a+'caption">'+d+"</span>")}r.controlNavScaffold.append("<li>"+t+"</li>"),o++}r.controlsContainer?e(r.controlsContainer).append(r.controlNavScaffold):r.append(r.controlNavScaffold),m.controlNav.set(),m.controlNav.active(),r.controlNavScaffold.delegate("a, img",l,function(t){if(t.preventDefault(),""===u||u===t.type){var i=e(this),n=r.controlNav.index(i);i.hasClass(a+"active")||(r.direction=n>r.currentSlide?"next":"prev",r.flexAnimate(n,r.vars.pauseOnAction))}""===u&&(u=t.type),m.setToClearWatchedEvent()})},setupManual:function(){r.controlNav=r.manualControls,m.controlNav.active(),r.controlNav.bind(l,function(t){if(t.preventDefault(),""===u||u===t.type){var i=e(this),n=r.controlNav.index(i);i.hasClass(a+"active")||(r.direction=n>r.currentSlide?"next":"prev",r.flexAnimate(n,r.vars.pauseOnAction))}""===u&&(u=t.type),m.setToClearWatchedEvent()})},set:function(){var t="thumbnails"===r.vars.controlNav?"img":"a";r.controlNav=e("."+a+"control-nav li "+t,r.controlsContainer?r.controlsContainer:r)},active:function(){r.controlNav.removeClass(a+"active").eq(r.animatingTo).addClass(a+"active")},update:function(t,i){r.pagingCount>1&&"add"===t?r.controlNavScaffold.append(e("<li><a>"+r.count+"</a></li>")):1===r.pagingCount?r.controlNavScaffold.find("li").remove():r.controlNav.eq(i).closest("li").remove(),m.controlNav.set(),r.pagingCount>1&&r.pagingCount!==r.controlNav.length?r.update(i,t):m.controlNav.active()}},directionNav:{setup:function(){var t=e('<ul class="'+a+'direction-nav"><li><a class="'+a+'prev" href="#">'+r.vars.prevText+'</a></li><li><a class="'+a+'next" href="#">'+r.vars.nextText+"</a></li></ul>");r.controlsContainer?(e(r.controlsContainer).append(t),r.directionNav=e("."+a+"direction-nav li a",r.controlsContainer)):(r.append(t),r.directionNav=e("."+a+"direction-nav li a",r)),m.directionNav.update(),r.directionNav.bind(l,function(t){t.preventDefault();var i;(""===u||u===t.type)&&(i=r.getTarget(e(this).hasClass(a+"next")?"next":"prev"),r.flexAnimate(i,r.vars.pauseOnAction)),""===u&&(u=t.type),m.setToClearWatchedEvent()})},update:function(){var e=a+"disabled";1===r.pagingCount?r.directionNav.addClass(e).attr("tabindex","-1"):r.vars.animationLoop?r.directionNav.removeClass(e).removeAttr("tabindex"):0===r.animatingTo?r.directionNav.removeClass(e).filter("."+a+"prev").addClass(e).attr("tabindex","-1"):r.animatingTo===r.last?r.directionNav.removeClass(e).filter("."+a+"next").addClass(e).attr("tabindex","-1"):r.directionNav.removeClass(e).removeAttr("tabindex")}},pausePlay:{setup:function(){var t=e('<div class="'+a+'pauseplay"><a></a></div>');r.controlsContainer?(r.controlsContainer.append(t),r.pausePlay=e("."+a+"pauseplay a",r.controlsContainer)):(r.append(t),r.pausePlay=e("."+a+"pauseplay a",r)),m.pausePlay.update(r.vars.slideshow?a+"pause":a+"play"),r.pausePlay.bind(l,function(t){t.preventDefault(),(""===u||u===t.type)&&(e(this).hasClass(a+"pause")?(r.manualPause=!0,r.manualPlay=!1,r.pause()):(r.manualPause=!1,r.manualPlay=!0,r.play())),""===u&&(u=t.type),m.setToClearWatchedEvent()})},update:function(e){"play"===e?r.pausePlay.removeClass(a+"pause").addClass(a+"play").html(r.vars.playText):r.pausePlay.removeClass(a+"play").addClass(a+"pause").html(r.vars.pauseText)}},touch:function(){function e(e){r.animating?e.preventDefault():(window.navigator.msPointerEnabled||1===e.touches.length)&&(r.pause(),y=d?r.h:r.w,g=Number(new Date),T=e.touches[0].pageX,P=e.touches[0].pageY,m=p&&c&&r.animatingTo===r.last?0:p&&c?r.limit-(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo:p&&r.currentSlide===r.last?r.limit:p?(r.itemW+r.vars.itemMargin)*r.move*r.currentSlide:c?(r.last-r.currentSlide+r.cloneOffset)*y:(r.currentSlide+r.cloneOffset)*y,u=d?P:T,h=d?T:P,t.addEventListener("touchmove",i,!1),t.addEventListener("touchend",n,!1))}function i(e){T=e.touches[0].pageX,P=e.touches[0].pageY,v=d?u-P:u-T,b=d?Math.abs(v)<Math.abs(T-h):Math.abs(v)<Math.abs(P-h);var t=500;(!b||Number(new Date)-g>t)&&(e.preventDefault(),!f&&r.transitions&&(r.vars.animationLoop||(v/=0===r.currentSlide&&0>v||r.currentSlide===r.last&&v>0?Math.abs(v)/y+2:1),r.setProps(m+v,"setTouch")))}function n(e){if(t.removeEventListener("touchmove",i,!1),r.animatingTo===r.currentSlide&&!b&&null!==v){var a=c?-v:v,o=r.getTarget(a>0?"next":"prev");r.canAdvance(o)&&(Number(new Date)-g<550&&Math.abs(a)>50||Math.abs(a)>y/2)?r.flexAnimate(o,r.vars.pauseOnAction):f||r.flexAnimate(r.currentSlide,r.vars.pauseOnAction,!0)}t.removeEventListener("touchend",n,!1),u=null,h=null,v=null,m=null}function a(e){e.stopPropagation(),r.animating?e.preventDefault():(r.pause(),t._gesture.addPointer(e.pointerId),w=0,y=d?r.h:r.w,g=Number(new Date),m=p&&c&&r.animatingTo===r.last?0:p&&c?r.limit-(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo:p&&r.currentSlide===r.last?r.limit:p?(r.itemW+r.vars.itemMargin)*r.move*r.currentSlide:c?(r.last-r.currentSlide+r.cloneOffset)*y:(r.currentSlide+r.cloneOffset)*y)}function s(e){e.stopPropagation();var i=e.target._slider;if(i){var r=-e.translationX,n=-e.translationY;return w+=d?n:r,v=w,b=d?Math.abs(w)<Math.abs(-r):Math.abs(w)<Math.abs(-n),e.detail===e.MSGESTURE_FLAG_INERTIA?void setImmediate(function(){t._gesture.stop()}):void((!b||Number(new Date)-g>500)&&(e.preventDefault(),!f&&i.transitions&&(i.vars.animationLoop||(v=w/(0===i.currentSlide&&0>w||i.currentSlide===i.last&&w>0?Math.abs(w)/y+2:1)),i.setProps(m+v,"setTouch"))))}}function l(e){e.stopPropagation();var t=e.target._slider;if(t){if(t.animatingTo===t.currentSlide&&!b&&null!==v){var i=c?-v:v,r=t.getTarget(i>0?"next":"prev");t.canAdvance(r)&&(Number(new Date)-g<550&&Math.abs(i)>50||Math.abs(i)>y/2)?t.flexAnimate(r,t.vars.pauseOnAction):f||t.flexAnimate(t.currentSlide,t.vars.pauseOnAction,!0)}u=null,h=null,v=null,m=null,w=0}}var u,h,m,y,v,g,b=!1,T=0,P=0,w=0;o?(t.style.msTouchAction="none",t._gesture=new MSGesture,t._gesture.target=t,t.addEventListener("MSPointerDown",a,!1),t._slider=r,t.addEventListener("MSGestureChange",s,!1),t.addEventListener("MSGestureEnd",l,!1)):t.addEventListener("touchstart",e,!1)},resize:function(){!r.animating&&r.is(":visible")&&(p||r.doMath(),f?m.smoothHeight():p?(r.slides.width(r.computedW),r.update(r.pagingCount),r.setProps()):d?(r.viewport.height(r.h),r.setProps(r.h,"setTotal")):(r.vars.smoothHeight&&m.smoothHeight(),r.newSlides.width(r.computedW),r.setProps(r.computedW,"setTotal")))},smoothHeight:function(e){if(!d||f){var t=f?r:r.viewport;e?t.animate({height:r.slides.eq(r.animatingTo).height()},e):t.height(r.slides.eq(r.animatingTo).height())}},sync:function(t){var i=e(r.vars.sync).data("flexslider"),n=r.animatingTo;switch(t){case"animate":i.flexAnimate(n,r.vars.pauseOnAction,!1,!0);break;case"play":i.playing||i.asNav||i.play();break;case"pause":i.pause()}},uniqueID:function(t){return t.filter("[id]").add(t.find("[id]")).each(function(){var t=e(this);t.attr("id",t.attr("id")+"_clone")}),t},pauseInvisible:{visProp:null,init:function(){var e=m.pauseInvisible.getHiddenProp();if(e){var t=e.replace(/[H|h]idden/,"")+"visibilitychange";document.addEventListener(t,function(){m.pauseInvisible.isHidden()?r.startTimeout?clearTimeout(r.startTimeout):r.pause():r.started?r.play():r.vars.initDelay>0?setTimeout(r.play,r.vars.initDelay):r.play()})}},isHidden:function(){var e=m.pauseInvisible.getHiddenProp();return e?document[e]:!1},getHiddenProp:function(){var e=["webkit","moz","ms","o"];if("hidden"in document)return"hidden";for(var t=0;t<e.length;t++)if(e[t]+"Hidden"in document)return e[t]+"Hidden";return null}},setToClearWatchedEvent:function(){clearTimeout(n),n=setTimeout(function(){u=""},3e3)}},r.flexAnimate=function(t,i,n,o,l){if(r.vars.animationLoop||t===r.currentSlide||(r.direction=t>r.currentSlide?"next":"prev"),h&&1===r.pagingCount&&(r.direction=r.currentItem<t?"next":"prev"),!r.animating&&(r.canAdvance(t,l)||n)&&r.is(":visible")){if(h&&o){var u=e(r.vars.asNavFor).data("flexslider");if(r.atEnd=0===t||t===r.count-1,u.flexAnimate(t,!0,!1,!0,l),r.direction=r.currentItem<t?"next":"prev",u.direction=r.direction,Math.ceil((t+1)/r.visible)-1===r.currentSlide||0===t)return r.currentItem=t,r.slides.removeClass(a+"active-slide").eq(t).addClass(a+"active-slide"),!1;r.currentItem=t,r.slides.removeClass(a+"active-slide").eq(t).addClass(a+"active-slide"),t=Math.floor(t/r.visible)}if(r.animating=!0,r.animatingTo=t,i&&r.pause(),r.vars.before(r),r.syncExists&&!l&&m.sync("animate"),r.vars.controlNav&&m.controlNav.active(),p||r.slides.removeClass(a+"active-slide").eq(t).addClass(a+"active-slide"),r.atEnd=0===t||t===r.last,r.vars.directionNav&&m.directionNav.update(),t===r.last&&(r.vars.end(r),r.vars.animationLoop||r.pause()),f)s?(r.slides.eq(r.currentSlide).css({opacity:0,zIndex:1}),r.slides.eq(t).css({opacity:1,zIndex:2}),r.wrapup(b)):(r.slides.eq(r.currentSlide).css({zIndex:1}).animate({opacity:0},r.vars.animationSpeed,r.vars.easing),r.slides.eq(t).css({zIndex:2}).animate({opacity:1},r.vars.animationSpeed,r.vars.easing,r.wrapup));else{var y,v,g,b=d?r.slides.filter(":first").height():r.computedW;p?(y=r.vars.itemMargin,g=(r.itemW+y)*r.move*r.animatingTo,v=g>r.limit&&1!==r.visible?r.limit:g):v=0===r.currentSlide&&t===r.count-1&&r.vars.animationLoop&&"next"!==r.direction?c?(r.count+r.cloneOffset)*b:0:r.currentSlide===r.last&&0===t&&r.vars.animationLoop&&"prev"!==r.direction?c?0:(r.count+1)*b:c?(r.count-1-t+r.cloneOffset)*b:(t+r.cloneOffset)*b,r.setProps(v,"",r.vars.animationSpeed),r.transitions?(r.vars.animationLoop&&r.atEnd||(r.animating=!1,r.currentSlide=r.animatingTo),r.container.unbind("webkitTransitionEnd transitionend"),r.container.bind("webkitTransitionEnd transitionend",function(){clearTimeout(r.ensureAnimationEnd),r.wrapup(b)}),clearTimeout(r.ensureAnimationEnd),r.ensureAnimationEnd=setTimeout(function(){r.wrapup(b)},r.vars.animationSpeed+100)):r.container.animate(r.args,r.vars.animationSpeed,r.vars.easing,function(){r.wrapup(b)})}r.vars.smoothHeight&&m.smoothHeight(r.vars.animationSpeed)}},r.wrapup=function(e){f||p||(0===r.currentSlide&&r.animatingTo===r.last&&r.vars.animationLoop?r.setProps(e,"jumpEnd"):r.currentSlide===r.last&&0===r.animatingTo&&r.vars.animationLoop&&r.setProps(e,"jumpStart")),r.animating=!1,r.currentSlide=r.animatingTo,r.vars.after(r)},r.animateSlides=function(){!r.animating&&y&&r.flexAnimate(r.getTarget("next"))},r.pause=function(){clearInterval(r.animatedSlides),r.animatedSlides=null,r.playing=!1,r.vars.pausePlay&&m.pausePlay.update("play"),r.syncExists&&m.sync("pause")},r.play=function(){r.playing&&clearInterval(r.animatedSlides),r.animatedSlides=r.animatedSlides||setInterval(r.animateSlides,r.vars.slideshowSpeed),r.started=r.playing=!0,r.vars.pausePlay&&m.pausePlay.update("pause"),r.syncExists&&m.sync("play")},r.stop=function(){r.pause(),r.stopped=!0},r.canAdvance=function(e,t){var i=h?r.pagingCount-1:r.last;return t?!0:h&&r.currentItem===r.count-1&&0===e&&"prev"===r.direction?!0:h&&0===r.currentItem&&e===r.pagingCount-1&&"next"!==r.direction?!1:e!==r.currentSlide||h?r.vars.animationLoop?!0:r.atEnd&&0===r.currentSlide&&e===i&&"next"!==r.direction?!1:r.atEnd&&r.currentSlide===i&&0===e&&"next"===r.direction?!1:!0:!1},r.getTarget=function(e){return r.direction=e,"next"===e?r.currentSlide===r.last?0:r.currentSlide+1:0===r.currentSlide?r.last:r.currentSlide-1},r.setProps=function(e,t,i){var n=function(){var i=e?e:(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo,n=function(){if(p)return"setTouch"===t?e:c&&r.animatingTo===r.last?0:c?r.limit-(r.itemW+r.vars.itemMargin)*r.move*r.animatingTo:r.animatingTo===r.last?r.limit:i;switch(t){case"setTotal":return c?(r.count-1-r.currentSlide+r.cloneOffset)*e:(r.currentSlide+r.cloneOffset)*e;case"setTouch":return c?e:e;case"jumpEnd":return c?e:r.count*e;case"jumpStart":return c?r.count*e:e;default:return e}}();return-1*n+"px"}();r.transitions&&(n=d?"translate3d(0,"+n+",0)":"translate3d("+n+",0,0)",i=void 0!==i?i/1e3+"s":"0s",r.container.css("-"+r.pfx+"-transition-duration",i),r.container.css("transition-duration",i)),r.args[r.prop]=n,(r.transitions||void 0===i)&&r.container.css(r.args),r.container.css("transform",n)},r.setup=function(t){if(f)r.slides.css({width:"100%","float":"left",marginRight:"-100%",position:"relative"}),"init"===t&&(s?r.slides.css({opacity:0,display:"block",webkitTransition:"opacity "+r.vars.animationSpeed/1e3+"s ease",zIndex:1}).eq(r.currentSlide).css({opacity:1,zIndex:2}):0==r.vars.fadeFirstSlide?r.slides.css({opacity:0,display:"block",zIndex:1}).eq(r.currentSlide).css({zIndex:2}).css({opacity:1}):r.slides.css({opacity:0,display:"block",zIndex:1}).eq(r.currentSlide).css({zIndex:2}).animate({opacity:1},r.vars.animationSpeed,r.vars.easing)),r.vars.smoothHeight&&m.smoothHeight();else{var i,n;"init"===t&&(r.viewport=e('<div class="'+a+'viewport"></div>').css({overflow:"hidden",position:"relative"}).appendTo(r).append(r.container),r.cloneCount=0,r.cloneOffset=0,c&&(n=e.makeArray(r.slides).reverse(),r.slides=e(n),r.container.empty().append(r.slides))),r.vars.animationLoop&&!p&&(r.cloneCount=2,r.cloneOffset=1,"init"!==t&&r.container.find(".clone").remove(),r.container.append(m.uniqueID(r.slides.first().clone().addClass("clone")).attr("aria-hidden","true")).prepend(m.uniqueID(r.slides.last().clone().addClass("clone")).attr("aria-hidden","true"))),r.newSlides=e(r.vars.selector,r),i=c?r.count-1-r.currentSlide+r.cloneOffset:r.currentSlide+r.cloneOffset,d&&!p?(r.container.height(200*(r.count+r.cloneCount)+"%").css("position","absolute").width("100%"),setTimeout(function(){r.newSlides.css({display:"block"}),r.doMath(),r.viewport.height(r.h),r.setProps(i*r.h,"init")},"init"===t?100:0)):(r.container.width(200*(r.count+r.cloneCount)+"%"),r.setProps(i*r.computedW,"init"),setTimeout(function(){r.doMath(),r.newSlides.css({width:r.computedW,"float":"left",display:"block"}),r.vars.smoothHeight&&m.smoothHeight()},"init"===t?100:0))}p||r.slides.removeClass(a+"active-slide").eq(r.currentSlide).addClass(a+"active-slide"),r.vars.init(r)},r.doMath=function(){var e=r.slides.first(),t=r.vars.itemMargin,i=r.vars.minItems,n=r.vars.maxItems;r.w=void 0===r.viewport?r.width():r.viewport.width(),r.h=e.height(),r.boxPadding=e.outerWidth()-e.width(),p?(r.itemT=r.vars.itemWidth+t,r.minW=i?i*r.itemT:r.w,r.maxW=n?n*r.itemT-t:r.w,r.itemW=r.minW>r.w?(r.w-t*(i-1))/i:r.maxW<r.w?(r.w-t*(n-1))/n:r.vars.itemWidth>r.w?r.w:r.vars.itemWidth,r.visible=Math.floor(r.w/r.itemW),r.move=r.vars.move>0&&r.vars.move<r.visible?r.vars.move:r.visible,r.pagingCount=Math.ceil((r.count-r.visible)/r.move+1),r.last=r.pagingCount-1,r.limit=1===r.pagingCount?0:r.vars.itemWidth>r.w?r.itemW*(r.count-1)+t*(r.count-1):(r.itemW+t)*r.count-r.w-t):(r.itemW=r.w,r.pagingCount=r.count,r.last=r.count-1),r.computedW=r.itemW-r.boxPadding},r.update=function(e,t){r.doMath(),p||(e<r.currentSlide?r.currentSlide+=1:e<=r.currentSlide&&0!==e&&(r.currentSlide-=1),r.animatingTo=r.currentSlide),r.vars.controlNav&&!r.manualControls&&("add"===t&&!p||r.pagingCount>r.controlNav.length?m.controlNav.update("add"):("remove"===t&&!p||r.pagingCount<r.controlNav.length)&&(p&&r.currentSlide>r.last&&(r.currentSlide-=1,r.animatingTo-=1),m.controlNav.update("remove",r.last))),r.vars.directionNav&&m.directionNav.update()},r.addSlide=function(t,i){var n=e(t);r.count+=1,r.last=r.count-1,d&&c?void 0!==i?r.slides.eq(r.count-i).after(n):r.container.prepend(n):void 0!==i?r.slides.eq(i).before(n):r.container.append(n),r.update(i,"add"),r.slides=e(r.vars.selector+":not(.clone)",r),r.setup(),r.vars.added(r)},r.removeSlide=function(t){var i=isNaN(t)?r.slides.index(e(t)):t;r.count-=1,r.last=r.count-1,isNaN(t)?e(t,r.slides).remove():d&&c?r.slides.eq(r.last).remove():r.slides.eq(t).remove(),r.doMath(),r.update(i,"remove"),r.slides=e(r.vars.selector+":not(.clone)",r),r.setup(),r.vars.removed(r)},m.init()},e(window).blur(function(e){focused=!1}).focus(function(e){focused=!0}),e.flexslider.defaults={namespace:"flex-",selector:".slides > li",animation:"fade",easing:"swing",direction:"horizontal",reverse:!1,animationLoop:!0,smoothHeight:!1,startAt:0,slideshow:!0,slideshowSpeed:7e3,animationSpeed:600,initDelay:0,randomize:!1,fadeFirstSlide:!0,thumbCaptions:!1,pauseOnAction:!0,pauseOnHover:!1,pauseInvisible:!0,useCSS:!0,touch:!0,video:!1,controlNav:!0,directionNav:!0,prevText:"Previous",nextText:"Next",keyboard:!0,multipleKeyboard:!1,mousewheel:!1,pausePlay:!1,pauseText:"Pause",playText:"Play",controlsContainer:"",manualControls:"",sync:"",asNavFor:"",itemWidth:0,itemMargin:0,minItems:1,maxItems:0,move:0,allowOneSlide:!0,start:function(){},before:function(){},after:function(){},end:function(){},added:function(){},removed:function(){},init:function(){}},e.fn.flexslider=function(t){if(void 0===t&&(t={}),"object"==typeof t)return this.each(function(){var i=e(this),r=t.selector?t.selector:".slides > li",n=i.find(r);1===n.length&&t.allowOneSlide===!0||0===n.length?(n.fadeIn(400),t.start&&t.start(i)):void 0===i.data("flexslider")&&new e.flexslider(this,t)});var i=e(this).data("flexslider");switch(t){case"play":i.play();break;case"pause":i.pause();break;case"stop":i.stop();break;case"next":i.flexAnimate(i.getTarget("next"),!0);break;case"prev":case"previous":i.flexAnimate(i.getTarget("prev"),!0);break;default:"number"==typeof t&&i.flexAnimate(t,!0)}}}(jQuery),function(){var e=jQuery,t=function(){function e(){this.fadeDuration=500,this.fitImagesInViewport=!0,this.resizeDuration=700,this.positionFromTop=50,this.showImageNumberLabel=!0,this.alwaysShowNavOnTouchDevices=!1,this.wrapAround=!1}return e.prototype.albumLabel=function(e,t){return"Image "+e+" of "+t},e}(),i=function(){function t(e){this.options=e,this.album=[],this.currentImageIndex=void 0,this.init()}return t.prototype.init=function(){this.enable(),this.build()},t.prototype.enable=function(){var t=this;e("body").on("click","a[rel^=lightbox], area[rel^=lightbox], a[data-lightbox], area[data-lightbox]",function(i){return t.start(e(i.currentTarget)),!1})},t.prototype.build=function(){var t=this;e("<div id='lightboxOverlay' class='lightboxOverlay'></div><div id='lightbox' class='lightbox'><div class='lb-outerContainer'><div class='lb-container'><img class='lb-image' src='' /><div class='lb-nav'><a class='lb-prev' href='' ></a><a class='lb-next' href='' ></a></div><div class='lb-loader'><a class='lb-cancel'></a></div></div></div><div class='lb-dataContainer'><div class='lb-data'><div class='lb-details'><span class='lb-caption'></span><span class='lb-number'></span></div><div class='lb-closeContainer'><a class='lb-close'></a></div></div></div></div>").appendTo(e("body")),this.$lightbox=e("#lightbox"),this.$overlay=e("#lightboxOverlay"),this.$outerContainer=this.$lightbox.find(".lb-outerContainer"),this.$container=this.$lightbox.find(".lb-container"),this.containerTopPadding=parseInt(this.$container.css("padding-top"),10),this.containerRightPadding=parseInt(this.$container.css("padding-right"),10),this.containerBottomPadding=parseInt(this.$container.css("padding-bottom"),10),this.containerLeftPadding=parseInt(this.$container.css("padding-left"),10),this.$overlay.hide().on("click",function(){return t.end(),!1}),this.$lightbox.hide().on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$outerContainer.on("click",function(i){return"lightbox"===e(i.target).attr("id")&&t.end(),!1}),this.$lightbox.find(".lb-prev").on("click",function(){return t.changeImage(0===t.currentImageIndex?t.album.length-1:t.currentImageIndex-1),!1}),this.$lightbox.find(".lb-next").on("click",function(){return t.changeImage(t.currentImageIndex===t.album.length-1?0:t.currentImageIndex+1),!1}),this.$lightbox.find(".lb-loader, .lb-close").on("click",function(){return t.end(),!1})},t.prototype.start=function(t){function i(e){r.album.push({link:e.attr("href"),title:e.attr("data-title")||e.attr("title")})}var r=this,n=e(window);n.on("resize",e.proxy(this.sizeOverlay,this)),e("select, object, embed").css({visibility:"hidden"}),this.sizeOverlay(),this.album=[];var a,o=0,s=t.attr("data-lightbox");if(s){a=e(t.prop("tagName")+'[data-lightbox="'+s+'"]');for(var l=0;l<a.length;l=++l)i(e(a[l])),a[l]===t[0]&&(o=l)}else if("lightbox"===t.attr("rel"))i(t);else{a=e(t.prop("tagName")+'[rel="'+t.attr("rel")+'"]');for(var u=0;u<a.length;u=++u)i(e(a[u])),a[u]===t[0]&&(o=u)}var d=n.scrollTop()+this.options.positionFromTop,c=n.scrollLeft();this.$lightbox.css({top:d+"px",left:c+"px"}).fadeIn(this.options.fadeDuration),this.changeImage(o)},t.prototype.changeImage=function(t){var i=this;this.disableKeyboardNav();var r=this.$lightbox.find(".lb-image");this.$overlay.fadeIn(this.options.fadeDuration),e(".lb-loader").fadeIn("slow"),this.$lightbox.find(".lb-image, .lb-nav, .lb-prev, .lb-next, .lb-dataContainer, .lb-numbers, .lb-caption").hide(),this.$outerContainer.addClass("animating");
var n=new Image;n.onload=function(){var a,o,s,l,u,d,c;r.attr("src",i.album[t].link),a=e(n),r.width(n.width),r.height(n.height),i.options.fitImagesInViewport&&(c=e(window).width(),d=e(window).height(),u=c-i.containerLeftPadding-i.containerRightPadding-20,l=d-i.containerTopPadding-i.containerBottomPadding-120,(n.width>u||n.height>l)&&(n.width/u>n.height/l?(s=u,o=parseInt(n.height/(n.width/s),10),r.width(s),r.height(o)):(o=l,s=parseInt(n.width/(n.height/o),10),r.width(s),r.height(o)))),i.sizeContainer(r.width(),r.height())},n.src=this.album[t].link,this.currentImageIndex=t},t.prototype.sizeOverlay=function(){this.$overlay.width(e(window).width()).height(e(document).height())},t.prototype.sizeContainer=function(e,t){function i(){r.$lightbox.find(".lb-dataContainer").width(o),r.$lightbox.find(".lb-prevLink").height(s),r.$lightbox.find(".lb-nextLink").height(s),r.showImage()}var r=this,n=this.$outerContainer.outerWidth(),a=this.$outerContainer.outerHeight(),o=e+this.containerLeftPadding+this.containerRightPadding,s=t+this.containerTopPadding+this.containerBottomPadding;n!==o||a!==s?this.$outerContainer.animate({width:o,height:s},this.options.resizeDuration,"swing",function(){i()}):i()},t.prototype.showImage=function(){this.$lightbox.find(".lb-loader").hide(),this.$lightbox.find(".lb-image").fadeIn("slow"),this.updateNav(),this.updateDetails(),this.preloadNeighboringImages(),this.enableKeyboardNav()},t.prototype.updateNav=function(){var e=!1;try{document.createEvent("TouchEvent"),e=this.options.alwaysShowNavOnTouchDevices?!0:!1}catch(t){}this.$lightbox.find(".lb-nav").show(),this.album.length>1&&(this.options.wrapAround?(e&&this.$lightbox.find(".lb-prev, .lb-next").css("opacity","1"),this.$lightbox.find(".lb-prev, .lb-next").show()):(this.currentImageIndex>0&&(this.$lightbox.find(".lb-prev").show(),e&&this.$lightbox.find(".lb-prev").css("opacity","1")),this.currentImageIndex<this.album.length-1&&(this.$lightbox.find(".lb-next").show(),e&&this.$lightbox.find(".lb-next").css("opacity","1"))))},t.prototype.updateDetails=function(){var t=this;"undefined"!=typeof this.album[this.currentImageIndex].title&&""!==this.album[this.currentImageIndex].title&&this.$lightbox.find(".lb-caption").html(this.album[this.currentImageIndex].title).fadeIn("fast").find("a").on("click",function(){location.href=e(this).attr("href")}),this.album.length>1&&this.options.showImageNumberLabel?this.$lightbox.find(".lb-number").text(this.options.albumLabel(this.currentImageIndex+1,this.album.length)).fadeIn("fast"):this.$lightbox.find(".lb-number").hide(),this.$outerContainer.removeClass("animating"),this.$lightbox.find(".lb-dataContainer").fadeIn(this.options.resizeDuration,function(){return t.sizeOverlay()})},t.prototype.preloadNeighboringImages=function(){if(this.album.length>this.currentImageIndex+1){var e=new Image;e.src=this.album[this.currentImageIndex+1].link}if(this.currentImageIndex>0){var t=new Image;t.src=this.album[this.currentImageIndex-1].link}},t.prototype.enableKeyboardNav=function(){e(document).on("keyup.keyboard",e.proxy(this.keyboardAction,this))},t.prototype.disableKeyboardNav=function(){e(document).off(".keyboard")},t.prototype.keyboardAction=function(e){var t=27,i=37,r=39,n=e.keyCode,a=String.fromCharCode(n).toLowerCase();n===t||a.match(/x|o|c/)?this.end():"p"===a||n===i?0!==this.currentImageIndex?this.changeImage(this.currentImageIndex-1):this.options.wrapAround&&this.album.length>1&&this.changeImage(this.album.length-1):("n"===a||n===r)&&(this.currentImageIndex!==this.album.length-1?this.changeImage(this.currentImageIndex+1):this.options.wrapAround&&this.album.length>1&&this.changeImage(0))},t.prototype.end=function(){this.disableKeyboardNav(),e(window).off("resize",this.sizeOverlay),this.$lightbox.fadeOut(this.options.fadeDuration),this.$overlay.fadeOut(this.options.fadeDuration),e("select, object, embed").css({visibility:"visible"})},t}();e(function(){var e=new t;new i(e)})}.call(this),!function(e){function t(){}function i(e){function i(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function n(t,i){e.fn[t]=function(n){if("string"==typeof n){for(var o=r.call(arguments,1),s=0,l=this.length;l>s;s++){var u=this[s],d=e.data(u,t);if(d)if(e.isFunction(d[n])&&"_"!==n.charAt(0)){var c=d[n].apply(d,o);if(void 0!==c)return c}else a("no such method '"+n+"' for "+t+" instance");else a("cannot call methods on "+t+" prior to initialization; attempted to call '"+n+"'")}return this}return this.each(function(){var r=e.data(this,t);r?(r.option(n),r._init()):(r=new i(this,n),e.data(this,t,r))})}}if(e){var a="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){i(t),n(e,t)},e.bridget}}var r=Array.prototype.slice;"function"==typeof define&&define.amd?define("jquery-bridget/jquery.bridget",["jquery"],i):i("object"==typeof exports?require("jquery"):e.jQuery)}(window),function(e){function t(t){var i=e.event;return i.target=i.target||i.srcElement||t,i}var i=document.documentElement,r=function(){};i.addEventListener?r=function(e,t,i){e.addEventListener(t,i,!1)}:i.attachEvent&&(r=function(e,i,r){e[i+r]=r.handleEvent?function(){var i=t(e);r.handleEvent.call(r,i)}:function(){var i=t(e);r.call(e,i)},e.attachEvent("on"+i,e[i+r])});var n=function(){};i.removeEventListener?n=function(e,t,i){e.removeEventListener(t,i,!1)}:i.detachEvent&&(n=function(e,t,i){e.detachEvent("on"+t,e[t+i]);try{delete e[t+i]}catch(r){e[t+i]=void 0}});var a={bind:r,unbind:n};"function"==typeof define&&define.amd?define("eventie/eventie",a):"object"==typeof exports?module.exports=a:e.eventie=a}(this),function(e){function t(e){"function"==typeof e&&(t.isReady?e():o.push(e))}function i(e){var i="readystatechange"===e.type&&"complete"!==a.readyState;t.isReady||i||r()}function r(){t.isReady=!0;for(var e=0,i=o.length;i>e;e++){var r=o[e];r()}}function n(n){return"complete"===a.readyState?r():(n.bind(a,"DOMContentLoaded",i),n.bind(a,"readystatechange",i),n.bind(e,"load",i)),t}var a=e.document,o=[];t.isReady=!1,"function"==typeof define&&define.amd?define("doc-ready/doc-ready",["eventie/eventie"],n):"object"==typeof exports?module.exports=n(require("eventie")):e.docReady=n(e.eventie)}(window),function(){function e(){}function t(e,t){for(var i=e.length;i--;)if(e[i].listener===t)return i;return-1}function i(e){return function(){return this[e].apply(this,arguments)}}var r=e.prototype,n=this,a=n.EventEmitter;r.getListeners=function(e){var t,i,r=this._getEvents();if(e instanceof RegExp){t={};for(i in r)r.hasOwnProperty(i)&&e.test(i)&&(t[i]=r[i])}else t=r[e]||(r[e]=[]);return t},r.flattenListeners=function(e){var t,i=[];for(t=0;t<e.length;t+=1)i.push(e[t].listener);return i},r.getListenersAsObject=function(e){var t,i=this.getListeners(e);return i instanceof Array&&(t={},t[e]=i),t||i},r.addListener=function(e,i){var r,n=this.getListenersAsObject(e),a="object"==typeof i;for(r in n)n.hasOwnProperty(r)&&-1===t(n[r],i)&&n[r].push(a?i:{listener:i,once:!1});return this},r.on=i("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=i("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,i){var r,n,a=this.getListenersAsObject(e);for(n in a)a.hasOwnProperty(n)&&(r=t(a[n],i),-1!==r&&a[n].splice(r,1));return this},r.off=i("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,i){var r,n,a=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(r=i.length;r--;)a.call(this,t,i[r]);else for(r in t)t.hasOwnProperty(r)&&(n=t[r])&&("function"==typeof n?a.call(this,r,n):o.call(this,r,n));return this},r.removeEvent=function(e){var t,i=typeof e,r=this._getEvents();if("string"===i)delete r[e];else if(e instanceof RegExp)for(t in r)r.hasOwnProperty(t)&&e.test(t)&&delete r[t];else delete this._events;return this},r.removeAllListeners=i("removeEvent"),r.emitEvent=function(e,t){var i,r,n,a,o=this.getListenersAsObject(e);for(n in o)if(o.hasOwnProperty(n))for(r=o[n].length;r--;)i=o[n][r],i.once===!0&&this.removeListener(e,i.listener),a=i.listener.apply(this,t||[]),a===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=i("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},e.noConflict=function(){return n.EventEmitter=a,e},"function"==typeof define&&define.amd?define("eventEmitter/EventEmitter",[],function(){return e}):"object"==typeof module&&module.exports?module.exports=e:n.EventEmitter=e}.call(this),function(e){function t(e){if(e){if("string"==typeof r[e])return e;e=e.charAt(0).toUpperCase()+e.slice(1);for(var t,n=0,a=i.length;a>n;n++)if(t=i[n]+e,"string"==typeof r[t])return t}}var i="Webkit Moz ms Ms O".split(" "),r=document.documentElement.style;"function"==typeof define&&define.amd?define("get-style-property/get-style-property",[],function(){return t}):"object"==typeof exports?module.exports=t:e.getStyleProperty=t}(window),function(e){function t(e){var t=parseFloat(e),i=-1===e.indexOf("%")&&!isNaN(t);return i&&t}function i(){}function r(){for(var e={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},t=0,i=o.length;i>t;t++){var r=o[t];e[r]=0}return e}function n(i){function n(){if(!p){p=!0;var r=e.getComputedStyle;if(u=function(){var e=r?function(e){return r(e,null)}:function(e){return e.currentStyle};return function(t){var i=e(t);return i||a("Style returned "+i+". Are you running this code in a hidden iframe on Firefox? See http://bit.ly/getsizebug1"),i}}(),d=i("boxSizing")){var n=document.createElement("div");n.style.width="200px",n.style.padding="1px 2px 3px 4px",n.style.borderStyle="solid",n.style.borderWidth="1px 2px 3px 4px",n.style[d]="border-box";var o=document.body||document.documentElement;o.appendChild(n);var s=u(n);c=200===t(s.width),o.removeChild(n)}}}function s(e){if(n(),"string"==typeof e&&(e=document.querySelector(e)),e&&"object"==typeof e&&e.nodeType){var i=u(e);if("none"===i.display)return r();var a={};a.width=e.offsetWidth,a.height=e.offsetHeight;for(var s=a.isBorderBox=!(!d||!i[d]||"border-box"!==i[d]),p=0,f=o.length;f>p;p++){var h=o[p],m=i[h];m=l(e,m);var y=parseFloat(m);a[h]=isNaN(y)?0:y}var v=a.paddingLeft+a.paddingRight,g=a.paddingTop+a.paddingBottom,b=a.marginLeft+a.marginRight,T=a.marginTop+a.marginBottom,P=a.borderLeftWidth+a.borderRightWidth,w=a.borderTopWidth+a.borderBottomWidth,Y=s&&c,x=t(i.width);x!==!1&&(a.width=x+(Y?0:v+P));var j=t(i.height);return j!==!1&&(a.height=j+(Y?0:g+w)),a.innerWidth=a.width-(v+P),a.innerHeight=a.height-(g+w),a.outerWidth=a.width+b,a.outerHeight=a.height+T,a}}function l(t,i){if(e.getComputedStyle||-1===i.indexOf("%"))return i;var r=t.style,n=r.left,a=t.runtimeStyle,o=a&&a.left;return o&&(a.left=t.currentStyle.left),r.left=i,i=r.pixelLeft,r.left=n,o&&(a.left=o),i}var u,d,c,p=!1;return s}var a="undefined"==typeof console?i:function(e){console.error(e)},o=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"];"function"==typeof define&&define.amd?define("get-size/get-size",["get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("desandro-get-style-property")):e.getSize=n(e.getStyleProperty)}(window),function(e){function t(e,t){return e[o](t)}function i(e){if(!e.parentNode){var t=document.createDocumentFragment();t.appendChild(e)}}function r(e,t){i(e);for(var r=e.parentNode.querySelectorAll(t),n=0,a=r.length;a>n;n++)if(r[n]===e)return!0;return!1}function n(e,r){return i(e),t(e,r)}var a,o=function(){if(e.matchesSelector)return"matchesSelector";for(var t=["webkit","moz","ms","o"],i=0,r=t.length;r>i;i++){var n=t[i],a=n+"MatchesSelector";if(e[a])return a}}();if(o){var s=document.createElement("div"),l=t(s,"div");a=l?t:n}else a=r;"function"==typeof define&&define.amd?define("matches-selector/matches-selector",[],function(){return a}):"object"==typeof exports?module.exports=a:window.matchesSelector=a}(Element.prototype),function(e){function t(e,t){for(var i in t)e[i]=t[i];return e}function i(e){for(var t in e)return!1;return t=null,!0}function r(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function n(e,n,a){function s(e,t){e&&(this.element=e,this.layout=t,this.position={x:0,y:0},this._create())}var l=a("transition"),u=a("transform"),d=l&&u,c=!!a("perspective"),p={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"}[l],f=["transform","transition","transitionDuration","transitionProperty"],h=function(){for(var e={},t=0,i=f.length;i>t;t++){var r=f[t],n=a(r);n&&n!==r&&(e[r]=n)}return e}();t(s.prototype,e.prototype),s.prototype._create=function(){this._transn={ingProperties:{},clean:{},onEnd:{}},this.css({position:"absolute"})},s.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},s.prototype.getSize=function(){this.size=n(this.element)},s.prototype.css=function(e){var t=this.element.style;for(var i in e){var r=h[i]||i;t[r]=e[i]}},s.prototype.getPosition=function(){var e=o(this.element),t=this.layout.options,i=t.isOriginLeft,r=t.isOriginTop,n=parseInt(e[i?"left":"right"],10),a=parseInt(e[r?"top":"bottom"],10);n=isNaN(n)?0:n,a=isNaN(a)?0:a;var s=this.layout.size;n-=i?s.paddingLeft:s.paddingRight,a-=r?s.paddingTop:s.paddingBottom,this.position.x=n,this.position.y=a},s.prototype.layoutPosition=function(){var e=this.layout.size,t=this.layout.options,i={};t.isOriginLeft?(i.left=this.position.x+e.paddingLeft+"px",i.right=""):(i.right=this.position.x+e.paddingRight+"px",i.left=""),t.isOriginTop?(i.top=this.position.y+e.paddingTop+"px",i.bottom=""):(i.bottom=this.position.y+e.paddingBottom+"px",i.top=""),this.css(i),this.emitEvent("layout",[this])};var m=c?function(e,t){return"translate3d("+e+"px, "+t+"px, 0)"}:function(e,t){return"translate("+e+"px, "+t+"px)"};s.prototype._transitionTo=function(e,t){this.getPosition();var i=this.position.x,r=this.position.y,n=parseInt(e,10),a=parseInt(t,10),o=n===this.position.x&&a===this.position.y;if(this.setPosition(e,t),o&&!this.isTransitioning)return void this.layoutPosition();var s=e-i,l=t-r,u={},d=this.layout.options;s=d.isOriginLeft?s:-s,l=d.isOriginTop?l:-l,u.transform=m(s,l),this.transition({to:u,onTransitionEnd:{transform:this.layoutPosition},isCleaning:!0})},s.prototype.goTo=function(e,t){this.setPosition(e,t),this.layoutPosition()},s.prototype.moveTo=d?s.prototype._transitionTo:s.prototype.goTo,s.prototype.setPosition=function(e,t){this.position.x=parseInt(e,10),this.position.y=parseInt(t,10)},s.prototype._nonTransition=function(e){this.css(e.to),e.isCleaning&&this._removeStyles(e.to);for(var t in e.onTransitionEnd)e.onTransitionEnd[t].call(this)},s.prototype._transition=function(e){if(!parseFloat(this.layout.options.transitionDuration))return void this._nonTransition(e);var t=this._transn;for(var i in e.onTransitionEnd)t.onEnd[i]=e.onTransitionEnd[i];for(i in e.to)t.ingProperties[i]=!0,e.isCleaning&&(t.clean[i]=!0);if(e.from){this.css(e.from);var r=this.element.offsetHeight;r=null}this.enableTransition(e.to),this.css(e.to),this.isTransitioning=!0};var y=u&&r(u)+",opacity";s.prototype.enableTransition=function(){this.isTransitioning||(this.css({transitionProperty:y,transitionDuration:this.layout.options.transitionDuration}),this.element.addEventListener(p,this,!1))},s.prototype.transition=s.prototype[l?"_transition":"_nonTransition"],s.prototype.onwebkitTransitionEnd=function(e){this.ontransitionend(e)},s.prototype.onotransitionend=function(e){this.ontransitionend(e)};var v={"-webkit-transform":"transform","-moz-transform":"transform","-o-transform":"transform"};s.prototype.ontransitionend=function(e){if(e.target===this.element){var t=this._transn,r=v[e.propertyName]||e.propertyName;if(delete t.ingProperties[r],i(t.ingProperties)&&this.disableTransition(),r in t.clean&&(this.element.style[e.propertyName]="",delete t.clean[r]),r in t.onEnd){var n=t.onEnd[r];n.call(this),delete t.onEnd[r]}this.emitEvent("transitionEnd",[this])}},s.prototype.disableTransition=function(){this.removeTransitionStyles(),this.element.removeEventListener(p,this,!1),this.isTransitioning=!1},s.prototype._removeStyles=function(e){var t={};for(var i in e)t[i]="";this.css(t)};var g={transitionProperty:"",transitionDuration:""};return s.prototype.removeTransitionStyles=function(){this.css(g)},s.prototype.removeElem=function(){this.element.parentNode.removeChild(this.element),this.emitEvent("remove",[this])},s.prototype.remove=function(){if(!l||!parseFloat(this.layout.options.transitionDuration))return void this.removeElem();var e=this;this.on("transitionEnd",function(){return e.removeElem(),!0}),this.hide()},s.prototype.reveal=function(){delete this.isHidden,this.css({display:""});var e=this.layout.options;this.transition({from:e.hiddenStyle,to:e.visibleStyle,isCleaning:!0})},s.prototype.hide=function(){this.isHidden=!0,this.css({display:""});var e=this.layout.options;this.transition({from:e.visibleStyle,to:e.hiddenStyle,isCleaning:!0,onTransitionEnd:{opacity:function(){this.isHidden&&this.css({display:"none"})}}})},s.prototype.destroy=function(){this.css({position:"",left:"",right:"",top:"",bottom:"",transition:"",transform:""})},s}var a=e.getComputedStyle,o=a?function(e){return a(e,null)}:function(e){return e.currentStyle};"function"==typeof define&&define.amd?define("outlayer/item",["eventEmitter/EventEmitter","get-size/get-size","get-style-property/get-style-property"],n):"object"==typeof exports?module.exports=n(require("wolfy87-eventemitter"),require("get-size"),require("desandro-get-style-property")):(e.Outlayer={},e.Outlayer.Item=n(e.EventEmitter,e.getSize,e.getStyleProperty))}(window),function(e){function t(e,t){for(var i in t)e[i]=t[i];return e}function i(e){return"[object Array]"===c.call(e)}function r(e){var t=[];if(i(e))t=e;else if(e&&"number"==typeof e.length)for(var r=0,n=e.length;n>r;r++)t.push(e[r]);else t.push(e);return t}function n(e,t){var i=f(t,e);-1!==i&&t.splice(i,1)}function a(e){return e.replace(/(.)([A-Z])/g,function(e,t,i){return t+"-"+i}).toLowerCase()}function o(i,o,c,f,h,m){function y(e,i){if("string"==typeof e&&(e=s.querySelector(e)),!e||!p(e))return void(l&&l.error("Bad "+this.constructor.namespace+" element: "+e));this.element=e,this.options=t({},this.constructor.defaults),this.option(i);var r=++v;this.element.outlayerGUID=r,g[r]=this,this._create(),this.options.isInitLayout&&this.layout()}var v=0,g={};return y.namespace="outlayer",y.Item=m,y.defaults={containerStyle:{position:"relative"},isInitLayout:!0,isOriginLeft:!0,isOriginTop:!0,isResizeBound:!0,isResizingContainer:!0,transitionDuration:"0.4s",hiddenStyle:{opacity:0,transform:"scale(0.001)"},visibleStyle:{opacity:1,transform:"scale(1)"}},t(y.prototype,c.prototype),y.prototype.option=function(e){t(this.options,e)},y.prototype._create=function(){this.reloadItems(),this.stamps=[],this.stamp(this.options.stamp),t(this.element.style,this.options.containerStyle),this.options.isResizeBound&&this.bindResize()},y.prototype.reloadItems=function(){this.items=this._itemize(this.element.children)},y.prototype._itemize=function(e){for(var t=this._filterFindItemElements(e),i=this.constructor.Item,r=[],n=0,a=t.length;a>n;n++){var o=t[n],s=new i(o,this);r.push(s)}return r},y.prototype._filterFindItemElements=function(e){e=r(e);for(var t=this.options.itemSelector,i=[],n=0,a=e.length;a>n;n++){var o=e[n];if(p(o))if(t){h(o,t)&&i.push(o);for(var s=o.querySelectorAll(t),l=0,u=s.length;u>l;l++)i.push(s[l])}else i.push(o)}return i},y.prototype.getItemElements=function(){for(var e=[],t=0,i=this.items.length;i>t;t++)e.push(this.items[t].element);return e},y.prototype.layout=function(){this._resetLayout(),this._manageStamps();var e=void 0!==this.options.isLayoutInstant?this.options.isLayoutInstant:!this._isLayoutInited;this.layoutItems(this.items,e),this._isLayoutInited=!0},y.prototype._init=y.prototype.layout,y.prototype._resetLayout=function(){this.getSize()},y.prototype.getSize=function(){this.size=f(this.element)},y.prototype._getMeasurement=function(e,t){var i,r=this.options[e];r?("string"==typeof r?i=this.element.querySelector(r):p(r)&&(i=r),this[e]=i?f(i)[t]:r):this[e]=0},y.prototype.layoutItems=function(e,t){e=this._getItemsForLayout(e),this._layoutItems(e,t),this._postLayout()},y.prototype._getItemsForLayout=function(e){for(var t=[],i=0,r=e.length;r>i;i++){var n=e[i];n.isIgnored||t.push(n)}return t},y.prototype._layoutItems=function(e,t){function i(){r.emitEvent("layoutComplete",[r,e])}var r=this;if(!e||!e.length)return void i();this._itemsOn(e,"layout",i);for(var n=[],a=0,o=e.length;o>a;a++){var s=e[a],l=this._getItemLayoutPosition(s);l.item=s,l.isInstant=t||s.isLayoutInstant,n.push(l)}this._processLayoutQueue(n)},y.prototype._getItemLayoutPosition=function(){return{x:0,y:0}},y.prototype._processLayoutQueue=function(e){for(var t=0,i=e.length;i>t;t++){var r=e[t];this._positionItem(r.item,r.x,r.y,r.isInstant)}},y.prototype._positionItem=function(e,t,i,r){r?e.goTo(t,i):e.moveTo(t,i)},y.prototype._postLayout=function(){this.resizeContainer()},y.prototype.resizeContainer=function(){if(this.options.isResizingContainer){var e=this._getContainerSize();e&&(this._setContainerMeasure(e.width,!0),this._setContainerMeasure(e.height,!1))}},y.prototype._getContainerSize=d,y.prototype._setContainerMeasure=function(e,t){if(void 0!==e){var i=this.size;i.isBorderBox&&(e+=t?i.paddingLeft+i.paddingRight+i.borderLeftWidth+i.borderRightWidth:i.paddingBottom+i.paddingTop+i.borderTopWidth+i.borderBottomWidth),e=Math.max(e,0),this.element.style[t?"width":"height"]=e+"px"}},y.prototype._itemsOn=function(e,t,i){function r(){return n++,n===a&&i.call(o),!0}for(var n=0,a=e.length,o=this,s=0,l=e.length;l>s;s++){var u=e[s];u.on(t,r)}},y.prototype.ignore=function(e){var t=this.getItem(e);t&&(t.isIgnored=!0)},y.prototype.unignore=function(e){var t=this.getItem(e);t&&delete t.isIgnored},y.prototype.stamp=function(e){if(e=this._find(e)){this.stamps=this.stamps.concat(e);for(var t=0,i=e.length;i>t;t++){var r=e[t];this.ignore(r)}}},y.prototype.unstamp=function(e){if(e=this._find(e))for(var t=0,i=e.length;i>t;t++){var r=e[t];n(r,this.stamps),this.unignore(r)}},y.prototype._find=function(e){return e?("string"==typeof e&&(e=this.element.querySelectorAll(e)),e=r(e)):void 0},y.prototype._manageStamps=function(){if(this.stamps&&this.stamps.length){this._getBoundingRect();for(var e=0,t=this.stamps.length;t>e;e++){var i=this.stamps[e];this._manageStamp(i)}}},y.prototype._getBoundingRect=function(){var e=this.element.getBoundingClientRect(),t=this.size;this._boundingRect={left:e.left+t.paddingLeft+t.borderLeftWidth,top:e.top+t.paddingTop+t.borderTopWidth,right:e.right-(t.paddingRight+t.borderRightWidth),bottom:e.bottom-(t.paddingBottom+t.borderBottomWidth)}},y.prototype._manageStamp=d,y.prototype._getElementOffset=function(e){var t=e.getBoundingClientRect(),i=this._boundingRect,r=f(e),n={left:t.left-i.left-r.marginLeft,top:t.top-i.top-r.marginTop,right:i.right-t.right-r.marginRight,bottom:i.bottom-t.bottom-r.marginBottom};return n},y.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},y.prototype.bindResize=function(){this.isResizeBound||(i.bind(e,"resize",this),this.isResizeBound=!0)},y.prototype.unbindResize=function(){this.isResizeBound&&i.unbind(e,"resize",this),this.isResizeBound=!1},y.prototype.onresize=function(){function e(){t.resize(),delete t.resizeTimeout}this.resizeTimeout&&clearTimeout(this.resizeTimeout);var t=this;this.resizeTimeout=setTimeout(e,100)},y.prototype.resize=function(){this.isResizeBound&&this.needsResizeLayout()&&this.layout()},y.prototype.needsResizeLayout=function(){var e=f(this.element),t=this.size&&e;return t&&e.innerWidth!==this.size.innerWidth},y.prototype.addItems=function(e){var t=this._itemize(e);return t.length&&(this.items=this.items.concat(t)),t},y.prototype.appended=function(e){var t=this.addItems(e);t.length&&(this.layoutItems(t,!0),this.reveal(t))},y.prototype.prepended=function(e){var t=this._itemize(e);if(t.length){var i=this.items.slice(0);this.items=t.concat(i),this._resetLayout(),this._manageStamps(),this.layoutItems(t,!0),this.reveal(t),this.layoutItems(i)}},y.prototype.reveal=function(e){var t=e&&e.length;if(t)for(var i=0;t>i;i++){var r=e[i];r.reveal()}},y.prototype.hide=function(e){var t=e&&e.length;if(t)for(var i=0;t>i;i++){var r=e[i];r.hide()}},y.prototype.getItem=function(e){for(var t=0,i=this.items.length;i>t;t++){var r=this.items[t];if(r.element===e)return r}},y.prototype.getItems=function(e){if(e&&e.length){for(var t=[],i=0,r=e.length;r>i;i++){var n=e[i],a=this.getItem(n);a&&t.push(a)}return t}},y.prototype.remove=function(e){e=r(e);var t=this.getItems(e);if(t&&t.length){this._itemsOn(t,"remove",function(){this.emitEvent("removeComplete",[this,t])});for(var i=0,a=t.length;a>i;i++){var o=t[i];o.remove(),n(o,this.items)}}},y.prototype.destroy=function(){var e=this.element.style;e.height="",e.position="",e.width="";for(var t=0,i=this.items.length;i>t;t++){var r=this.items[t];r.destroy()}this.unbindResize();var n=this.element.outlayerGUID;delete g[n],delete this.element.outlayerGUID,u&&u.removeData(this.element,this.constructor.namespace)},y.data=function(e){var t=e&&e.outlayerGUID;return t&&g[t]},y.create=function(e,i){function r(){y.apply(this,arguments)}return Object.create?r.prototype=Object.create(y.prototype):t(r.prototype,y.prototype),r.prototype.constructor=r,r.defaults=t({},y.defaults),t(r.defaults,i),r.prototype.settings={},r.namespace=e,r.data=y.data,r.Item=function(){m.apply(this,arguments)},r.Item.prototype=new m,o(function(){for(var t=a(e),i=s.querySelectorAll(".js-"+t),n="data-"+t+"-options",o=0,d=i.length;d>o;o++){var c,p=i[o],f=p.getAttribute(n);try{c=f&&JSON.parse(f)}catch(h){l&&l.error("Error parsing "+n+" on "+p.nodeName.toLowerCase()+(p.id?"#"+p.id:"")+": "+h);continue}var m=new r(p,c);u&&u.data(p,e,m)}}),u&&u.bridget&&u.bridget(e,r),r},y.Item=m,y}var s=e.document,l=e.console,u=e.jQuery,d=function(){},c=Object.prototype.toString,p="function"==typeof HTMLElement||"object"==typeof HTMLElement?function(e){return e instanceof HTMLElement}:function(e){return e&&"object"==typeof e&&1===e.nodeType&&"string"==typeof e.nodeName},f=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var i=0,r=e.length;r>i;i++)if(e[i]===t)return i;return-1};"function"==typeof define&&define.amd?define("outlayer/outlayer",["eventie/eventie","doc-ready/doc-ready","eventEmitter/EventEmitter","get-size/get-size","matches-selector/matches-selector","./item"],o):"object"==typeof exports?module.exports=o(require("eventie"),require("doc-ready"),require("wolfy87-eventemitter"),require("get-size"),require("desandro-matches-selector"),require("./item")):e.Outlayer=o(e.eventie,e.docReady,e.EventEmitter,e.getSize,e.matchesSelector,e.Outlayer.Item)}(window),function(e){function t(e,t){var r=e.create("masonry");return r.prototype._resetLayout=function(){this.getSize(),this._getMeasurement("columnWidth","outerWidth"),this._getMeasurement("gutter","outerWidth"),this.measureColumns();var e=this.cols;for(this.colYs=[];e--;)this.colYs.push(0);this.maxY=0},r.prototype.measureColumns=function(){if(this.getContainerWidth(),!this.columnWidth){var e=this.items[0],i=e&&e.element;this.columnWidth=i&&t(i).outerWidth||this.containerWidth}this.columnWidth+=this.gutter,this.cols=Math.floor((this.containerWidth+this.gutter)/this.columnWidth),this.cols=Math.max(this.cols,1)},r.prototype.getContainerWidth=function(){var e=this.options.isFitWidth?this.element.parentNode:this.element,i=t(e);this.containerWidth=i&&i.innerWidth},r.prototype._getItemLayoutPosition=function(e){e.getSize();var t=e.size.outerWidth%this.columnWidth,r=t&&1>t?"round":"ceil",n=Math[r](e.size.outerWidth/this.columnWidth);n=Math.min(n,this.cols);for(var a=this._getColGroup(n),o=Math.min.apply(Math,a),s=i(a,o),l={x:this.columnWidth*s,y:o},u=o+e.size.outerHeight,d=this.cols+1-a.length,c=0;d>c;c++)this.colYs[s+c]=u;return l},r.prototype._getColGroup=function(e){if(2>e)return this.colYs;for(var t=[],i=this.cols+1-e,r=0;i>r;r++){var n=this.colYs.slice(r,r+e);t[r]=Math.max.apply(Math,n)}return t},r.prototype._manageStamp=function(e){var i=t(e),r=this._getElementOffset(e),n=this.options.isOriginLeft?r.left:r.right,a=n+i.outerWidth,o=Math.floor(n/this.columnWidth);o=Math.max(0,o);var s=Math.floor(a/this.columnWidth);s-=a%this.columnWidth?0:1,s=Math.min(this.cols-1,s);for(var l=(this.options.isOriginTop?r.top:r.bottom)+i.outerHeight,u=o;s>=u;u++)this.colYs[u]=Math.max(l,this.colYs[u])},r.prototype._getContainerSize=function(){this.maxY=Math.max.apply(Math,this.colYs);var e={height:this.maxY};return this.options.isFitWidth&&(e.width=this._getContainerFitWidth()),e},r.prototype._getContainerFitWidth=function(){for(var e=0,t=this.cols;--t&&0===this.colYs[t];)e++;return(this.cols-e)*this.columnWidth-this.gutter},r.prototype.needsResizeLayout=function(){var e=this.containerWidth;return this.getContainerWidth(),e!==this.containerWidth},r}var i=Array.prototype.indexOf?function(e,t){return e.indexOf(t)}:function(e,t){for(var i=0,r=e.length;r>i;i++){var n=e[i];if(n===t)return i}return-1};"function"==typeof define&&define.amd?define(["outlayer/outlayer","get-size/get-size"],t):"object"==typeof exports?module.exports=t(require("outlayer"),require("get-size")):e.Masonry=t(e.Outlayer,e.getSize)}(window);var twitterFetcher=function(){function e(e){return e.replace(/<b[^>]*>(.*?)<\/b>/gi,function(e,t){return t}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function t(e,t){for(var i=[],r=RegExp("(^| )"+t+"( |$)"),n=e.getElementsByTagName("*"),a=0,o=n.length;o>a;a++)r.test(n[a].className)&&i.push(n[a]);return i}var i="",r=20,n=!0,a=[],o=!1,s=!0,l=!0,u=null,d=!0,c=!0,p=null,f=!0;return{fetch:function(e,t,d,h,m,y,v,g,b,T){void 0===d&&(d=20),void 0===h&&(n=!0),void 0===m&&(m=!0),void 0===y&&(y=!0),void 0===v&&(v="default"),void 0===g&&(g=!0),void 0===b&&(b=null),void 0===T&&(T=!0),o?a.push({id:e,domId:t,maxTweets:d,enableLinks:h,showUser:m,showTime:y,dateFunction:v,showRt:g,customCallback:b,showInteraction:T}):(o=!0,i=t,r=d,n=h,l=m,s=y,c=g,u=v,p=b,f=T,t=document.createElement("script"),t.type="text/javascript",t.src="//cdn.syndication.twimg.com/widgets/timelines/"+e+"?&lang=en&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random(),document.getElementsByTagName("head")[0].appendChild(t))},callback:function(h){var m=document.createElement("div");m.innerHTML=h.body,"undefined"==typeof m.getElementsByClassName&&(d=!1),h=[];var y=[],v=[],g=[],b=[],T=0;if(d)for(m=m.getElementsByClassName("tweet");T<m.length;)0<m[T].getElementsByClassName("retweet-credit").length?g.push(!0):g.push(!1),(!g[T]||g[T]&&c)&&(h.push(m[T].getElementsByClassName("e-entry-title")[0]),b.push(m[T].getAttribute("data-tweet-id")),y.push(m[T].getElementsByClassName("p-author")[0]),v.push(m[T].getElementsByClassName("dt-updated")[0])),T++;else for(m=t(m,"tweet");T<m.length;)h.push(t(m[T],"e-entry-title")[0]),b.push(m[T].getAttribute("data-tweet-id")),y.push(t(m[T],"p-author")[0]),v.push(t(m[T],"dt-updated")[0]),0<t(m[T],"retweet-credit").length?g.push(!0):g.push(!1),T++;for(h.length>r&&(h.splice(r,h.length-r),y.splice(r,y.length-r),v.splice(r,v.length-r),g.splice(r,g.length-r)),m=[],T=h.length,g=0;T>g;){if("string"!=typeof u){var P=new Date(v[g].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),P=u(P);
if(v[g].setAttribute("aria-label",P),h[g].innerText)if(d)v[g].innerText=P;else{var w=document.createElement("p"),Y=document.createTextNode(P);w.appendChild(Y),w.setAttribute("aria-label",P),v[g]=w}else v[g].textContent=P}P="",n?(l&&(P+='<div class="user">'+e(y[g].innerHTML)+"</div>"),P+='<p class="tweet">'+e(h[g].innerHTML)+"</p>",s&&(P+='<p class="timePosted">'+v[g].getAttribute("aria-label")+"</p>")):h[g].innerText?(l&&(P+='<p class="user">'+y[g].innerText+"</p>"),P+='<p class="tweet">'+h[g].innerText+"</p>",s&&(P+='<p class="timePosted">'+v[g].innerText+"</p>")):(l&&(P+='<p class="user">'+y[g].textContent+"</p>"),P+='<p class="tweet">'+h[g].textContent+"</p>",s&&(P+='<p class="timePosted">'+v[g].textContent+"</p>")),f&&(P+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+b[g]+'" class="twitter_reply_icon">Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+b[g]+'" class="twitter_retweet_icon">Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+b[g]+'" class="twitter_fav_icon">Favorite</a></p>'),m.push(P),g++}if(null==p){for(h=m.length,y=0,v=document.getElementById(i),b="<ul>";h>y;)b+="<li>"+m[y]+"</li>",y++;v.innerHTML=b+"</ul>"}else p(m);o=!1,0<a.length&&(twitterFetcher.fetch(a[0].id,a[0].domId,a[0].maxTweets,a[0].enableLinks,a[0].showUser,a[0].showTime,a[0].dateFunction,a[0].showRt,a[0].customCallback,a[0].showInteraction),a.splice(0,1))}}}();"function"!=typeof Object.create&&(Object.create=function(e){function t(){}return t.prototype=e,new t}),function(e){var t={init:function(t,i){var r=this;r.elem=i,r.$elem=e(i),r.api="https://api.instagram.com/v1",r.accessData=e.fn.spectragram.accessData,r.options=e.extend({},e.fn.spectragram.options,t)},getRecentMedia:function(e){var t=this,i="/users/"+e+"/media/recent/?"+t.accessData.clientID+"&access_token="+t.accessData.accessToken;t.fetch(i).done(function(e){t.display(e)})},getUserFeed:function(){var t=this,i="/users/search?q="+t.options.query+"&count="+t.options.max+"&access_token="+t.accessData.accessToken;t.fetch(i).done(function(i){i.data.length?t.getRecentMedia(i.data[0].id):e.error("Spectagram.js - Error: the username "+t.options.query+" does not exist.")})},getPopular:function(){var e=this,t="/media/popular?client_id="+e.accessData.clientID+"&access_token="+e.accessData.accessToken;e.fetch(t).done(function(t){e.display(t)})},getRecentTagged:function(){var t=this,i="/tags/"+t.options.query+"/media/recent?client_id="+t.accessData.clientID+"&access_token="+t.accessData.accessToken;t.fetch(i).done(function(i){i.data.length?t.display(i):e.error("Spectagram.js - Error: the tag "+t.options.query+" does not have results.")})},fetch:function(t){var i=this,r=i.api+t;return e.ajax({type:"GET",dataType:"jsonp",cache:!1,url:r})},display:function(t){var i,r=this,n=r.options.size,a=r.options.max>=t.data.length?t.data.length:r.options.max;if(0===t.data.length)r.$elem.append(e(r.options.wrapEachWith).append(r.options.notFoundMsg));else for(var o=0;a>o;o++)i="small"==n?t.data[o].images.thumbnail.url:"medium"==n?t.data[o].images.low_resolution.url:t.data[o].images.standard_resolution.url,r.$elem.append(e(r.options.wrapEachWith).append("<a title='Pic' target='_blank' href='"+t.data[o].link+"'><img src='"+i+"'></img></a>"));"function"==typeof r.options.complete&&r.options.complete.call(r)}};jQuery.fn.spectragram=function(i,r){jQuery.fn.spectragram.accessData.clientID?this.each(function(){var n=Object.create(t);return n.init(r,this),n[i]?n[i](this):void e.error("Method "+i+" does not exist on jQuery.spectragram")}):e.error("You must define an accessToken and a clientID on jQuery.spectragram")},jQuery.fn.spectragram.options={max:10,query:"coffee",size:"medium",wrapEachWith:"<li></li>",complete:null},jQuery.fn.spectragram.accessData={accessToken:null,clientID:null}}(jQuery,window,document);var ytp=ytp||{};!function(jQuery,ytp){var nAgt=navigator.userAgent;if(!jQuery.browser){jQuery.browser={},jQuery.browser.mozilla=!1,jQuery.browser.webkit=!1,jQuery.browser.opera=!1,jQuery.browser.safari=!1,jQuery.browser.chrome=!1,jQuery.browser.msie=!1,jQuery.browser.ua=nAgt,jQuery.browser.name=navigator.appName,jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10);var nameOffset,verOffset,ix;if(-1!=(verOffset=nAgt.indexOf("Opera")))jQuery.browser.opera=!0,jQuery.browser.name="Opera",jQuery.browser.fullVersion=nAgt.substring(verOffset+6),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8));else if(-1!=(verOffset=nAgt.indexOf("MSIE")))jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer",jQuery.browser.fullVersion=nAgt.substring(verOffset+5);else if(-1!=nAgt.indexOf("Trident")){jQuery.browser.msie=!0,jQuery.browser.name="Microsoft Internet Explorer";var start=nAgt.indexOf("rv:")+3,end=start+4;jQuery.browser.fullVersion=nAgt.substring(start,end)}else-1!=(verOffset=nAgt.indexOf("Chrome"))?(jQuery.browser.webkit=!0,jQuery.browser.chrome=!0,jQuery.browser.name="Chrome",jQuery.browser.fullVersion=nAgt.substring(verOffset+7)):-1!=(verOffset=nAgt.indexOf("Safari"))?(jQuery.browser.webkit=!0,jQuery.browser.safari=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("AppleWebkit"))?(jQuery.browser.webkit=!0,jQuery.browser.name="Safari",jQuery.browser.fullVersion=nAgt.substring(verOffset+7),-1!=(verOffset=nAgt.indexOf("Version"))&&(jQuery.browser.fullVersion=nAgt.substring(verOffset+8))):-1!=(verOffset=nAgt.indexOf("Firefox"))?(jQuery.browser.mozilla=!0,jQuery.browser.name="Firefox",jQuery.browser.fullVersion=nAgt.substring(verOffset+8)):(nameOffset=nAgt.lastIndexOf(" ")+1)<(verOffset=nAgt.lastIndexOf("/"))&&(jQuery.browser.name=nAgt.substring(nameOffset,verOffset),jQuery.browser.fullVersion=nAgt.substring(verOffset+1),jQuery.browser.name.toLowerCase()==jQuery.browser.name.toUpperCase()&&(jQuery.browser.name=navigator.appName));-1!=(ix=jQuery.browser.fullVersion.indexOf(";"))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),-1!=(ix=jQuery.browser.fullVersion.indexOf(" "))&&(jQuery.browser.fullVersion=jQuery.browser.fullVersion.substring(0,ix)),jQuery.browser.majorVersion=parseInt(""+jQuery.browser.fullVersion,10),isNaN(jQuery.browser.majorVersion)&&(jQuery.browser.fullVersion=""+parseFloat(navigator.appVersion),jQuery.browser.majorVersion=parseInt(navigator.appVersion,10)),jQuery.browser.version=jQuery.browser.majorVersion}jQuery.browser.android=/Android/i.test(nAgt),jQuery.browser.blackberry=/BlackBerry|BB|PlayBook/i.test(nAgt),jQuery.browser.ios=/iPhone|iPad|iPod|webOS/i.test(nAgt),jQuery.browser.operaMobile=/Opera Mini/i.test(nAgt),jQuery.browser.kindle=/Kindle|Silk/i.test(nAgt),jQuery.browser.windowsMobile=/IEMobile|Windows Phone/i.test(nAgt),jQuery.browser.mobile=jQuery.browser.android||jQuery.browser.blackberry||jQuery.browser.ios||jQuery.browser.windowsMobile||jQuery.browser.operaMobile||jQuery.browser.kindle,jQuery.fn.CSSAnimate=function(e,t,i,r,n){function a(e){return e.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function o(e,t){return"string"!=typeof e||e.match(/^[\-0-9\.]+$/)?""+e+t:e}return jQuery.support.CSStransition=function(){var e=(document.body||document.documentElement).style;return void 0!==e.transition||void 0!==e.WebkitTransition||void 0!==e.MozTransition||void 0!==e.MsTransition||void 0!==e.OTransition}(),this.each(function(){var s=this,l=jQuery(this);s.id=s.id||"CSSA_"+(new Date).getTime();var u=u||{type:"noEvent"};if(s.CSSAIsRunning&&s.eventType==u.type)s.CSSqueue=function(){l.CSSAnimate(e,t,i,r,n)};else if(s.CSSqueue=null,s.eventType=u.type,0!==l.length&&e){if(s.CSSAIsRunning=!0,"function"==typeof t&&(n=t,t=jQuery.fx.speeds._default),"function"==typeof i&&(n=i,i=0),"function"==typeof r&&(n=r,r="cubic-bezier(0.65,0.03,0.36,0.72)"),"string"==typeof t)for(var d in jQuery.fx.speeds){if(t==d){t=jQuery.fx.speeds[d];break}t=jQuery.fx.speeds._default}if(t||(t=jQuery.fx.speeds._default),jQuery.support.CSStransition){u={"default":"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},u[r]&&(r=u[r]);var c="",p="transitionEnd";jQuery.browser.webkit?(c="-webkit-",p="webkitTransitionEnd"):jQuery.browser.mozilla?(c="-moz-",p="transitionend"):jQuery.browser.opera?(c="-o-",p="otransitionend"):jQuery.browser.msie&&(c="-ms-",p="msTransitionEnd"),u=[];for(f in e)d=f,"transform"===d&&(d=c+"transform",e[d]=e[f],delete e[f]),"filter"===d&&(d=c+"filter",e[d]=e[f],delete e[f]),("transform-origin"===d||"origin"===d)&&(d=c+"transform-origin",e[d]=e[f],delete e[f]),"x"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" translateX("+o(e[f],"px")+")",delete e[f]),"y"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" translateY("+o(e[f],"px")+")",delete e[f]),"z"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" translateZ("+o(e[f],"px")+")",delete e[f]),"rotate"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" rotate("+o(e[f],"deg")+")",delete e[f]),"rotateX"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" rotateX("+o(e[f],"deg")+")",delete e[f]),"rotateY"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" rotateY("+o(e[f],"deg")+")",delete e[f]),"rotateZ"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" rotateZ("+o(e[f],"deg")+")",delete e[f]),"scale"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" scale("+o(e[f],"")+")",delete e[f]),"scaleX"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" scaleX("+o(e[f],"")+")",delete e[f]),"scaleY"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" scaleY("+o(e[f],"")+")",delete e[f]),"scaleZ"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" scaleZ("+o(e[f],"")+")",delete e[f]),"skew"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" skew("+o(e[f],"deg")+")",delete e[f]),"skewX"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" skewX("+o(e[f],"deg")+")",delete e[f]),"skewY"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" skewY("+o(e[f],"deg")+")",delete e[f]),"perspective"===d&&(d=c+"transform",e[d]=e[d]||"",e[d]+=" perspective("+o(e[f],"px")+")",delete e[f]),0>u.indexOf(d)&&u.push(a(d));var f=u.join(","),h=function(){l.off(p+"."+s.id),clearTimeout(s.timeout),l.css(c+"transition",""),"function"==typeof n&&n(l),s.called=!0,s.CSSAIsRunning=!1,"function"==typeof s.CSSqueue&&(s.CSSqueue(),s.CSSqueue=null)},m={};jQuery.extend(m,e),m[c+"transition-property"]=f,m[c+"transition-duration"]=t+"ms",m[c+"transition-delay"]=i+"ms",m[c+"transition-style"]="preserve-3d",m[c+"transition-timing-function"]=r,setTimeout(function(){l.one(p+"."+s.id,h),l.css(m)},1),s.timeout=setTimeout(function(){l.called||!n?(l.called=!1,s.CSSAIsRunning=!1):(l.css(c+"transition",""),n(l),s.CSSAIsRunning=!1,"function"==typeof s.CSSqueue&&(s.CSSqueue(),s.CSSqueue=null))},t+i+100)}else{for(var f in e)"transform"===f&&delete e[f],"filter"===f&&delete e[f],"transform-origin"===f&&delete e[f],"auto"===e[f]&&delete e[f];n&&"string"!=typeof n||(n="linear"),l.animate(e,t,n)}}})};var getYTPVideoID=function(e){var t,i;return e.indexOf("youtu.be")>0?(t=e.substr(e.lastIndexOf("/")+1,e.length),i=t.indexOf("?list=")>0?t.substr(t.lastIndexOf("="),t.length):null,t=i?t.substr(0,t.lastIndexOf("?")):t):e.indexOf("http")>-1?(t=e.match(/[\\?&]v=([^&#]*)/)[1],i=e.indexOf("list=")>0?e.match(/[\\?&]list=([^&#]*)/)[1]:null):(t=e.length>15?null:e,i=t?null:e),{videoID:t,playlistID:i}};jQuery.mbYTPlayer={name:"jquery.mb.YTPlayer",version:"2.8.1",author:"Matteo Bicocchi",defaults:{containment:"body",ratio:"auto",videoURL:null,playlistURL:null,startAt:0,stopAt:0,autoPlay:!0,vol:100,addRaster:!1,opacity:1,quality:"default",mute:!1,loop:!0,showControls:!0,showAnnotations:!1,showYTLogo:!0,stopMovieOnClick:!1,stopMovieOnBlur:!0,realfullscreen:!0,gaTrack:!0,optimizeDisplay:!0,onReady:function(){}},controls:{play:"P",pause:"p",mute:"M",unmute:"A",onlyYT:"O",showSite:"R",ytLogo:"Y"},locationProtocol:"https:",buildPlayer:function(options){return this.each(function(){var YTPlayer=this,$YTPlayer=jQuery(YTPlayer);YTPlayer.loop=0,YTPlayer.opt={},$YTPlayer.addClass("mb_YTPlayer");var property=$YTPlayer.data("property")&&"string"==typeof $YTPlayer.data("property")?eval("("+$YTPlayer.data("property")+")"):$YTPlayer.data("property");"undefined"!=typeof property&&"undefined"!=typeof property.vol&&(property.vol=0==property.vol?property.vol=1:property.vol),jQuery.extend(YTPlayer.opt,jQuery.mbYTPlayer.defaults,options,property),YTPlayer.isRetina=window.retina||window.devicePixelRatio>1;var isIframe=function(){var e=!1;try{self.location.href!=top.location.href&&(e=!0)}catch(t){e=!0}return e};YTPlayer.canGoFullScreen=!(jQuery.browser.msie||jQuery.browser.opera||isIframe()),YTPlayer.canGoFullScreen||(YTPlayer.opt.realfullscreen=!1),$YTPlayer.attr("id")||$YTPlayer.attr("id","video_"+(new Date).getTime());var playerID="mbYTP_"+YTPlayer.id;YTPlayer.isAlone=!1,YTPlayer.hasFocus=!0;var videoID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).videoID:$YTPlayer.attr("href")?getYTPVideoID($YTPlayer.attr("href")).videoID:!1,playlistID=this.opt.videoURL?getYTPVideoID(this.opt.videoURL).playlistID:$YTPlayer.attr("href")?getYTPVideoID($YTPlayer.attr("href")).playlistID:!1;YTPlayer.videoID=videoID,YTPlayer.playlistID=playlistID,YTPlayer.opt.showAnnotations=YTPlayer.opt.showAnnotations?"0":"3";var playerVars={autoplay:0,modestbranding:1,controls:0,showinfo:0,rel:0,enablejsapi:1,version:3,playerapiid:playerID,origin:"*",allowfullscreen:!0,wmode:"transparent",iv_load_policy:YTPlayer.opt.showAnnotations},v=document.createElement("video");v.canPlayType&&jQuery.extend(playerVars,{html5:1}),jQuery.browser.msie&&jQuery.browser.version<9&&(this.opt.opacity=1);var playerBox=jQuery("<div/>").attr("id",playerID).addClass("playerBox"),overlay=jQuery("<div/>").css({position:"absolute",top:0,left:0,width:"100%",height:"100%"}).addClass("YTPOverlay");if(YTPlayer.isSelf="self"==YTPlayer.opt.containment,YTPlayer.opt.containment=jQuery("self"==YTPlayer.opt.containment?this:YTPlayer.opt.containment),YTPlayer.isBackground="body"==YTPlayer.opt.containment.get(0).tagName.toLowerCase(),!YTPlayer.isBackground||!ytp.backgroundIsInited){var isPlayer=YTPlayer.opt.containment.is(jQuery(this));if(YTPlayer.canPlayOnMobile=isPlayer&&0==jQuery(this).children().length,isPlayer?YTPlayer.isPlayer=!0:$YTPlayer.hide(),jQuery.browser.mobile&&!YTPlayer.canPlayOnMobile)return void $YTPlayer.remove();if(YTPlayer.opt.addRaster){var classN="dot"==YTPlayer.opt.addRaster?"raster-dot":"raster";overlay.addClass(YTPlayer.isRetina?classN+" retina":classN)}else overlay.removeClass(function(e,t){var i=t.split(" "),r=[];return jQuery.each(i,function(e,t){/raster-.*/.test(t)&&r.push(t)}),r.push("retina"),r.join(" ")});var wrapper=jQuery("<div/>").addClass("mbYTP_wrapper").attr("id","wrapper_"+playerID);if(wrapper.css({position:"absolute",zIndex:0,minWidth:"100%",minHeight:"100%",left:0,top:0,overflow:"hidden",opacity:0}),playerBox.css({position:"absolute",zIndex:0,width:"100%",height:"100%",top:0,left:0,overflow:"hidden"}),wrapper.append(playerBox),YTPlayer.opt.containment.children().not("script, style").each(function(){"static"==jQuery(this).css("position")&&jQuery(this).css("position","relative")}),YTPlayer.isBackground?(jQuery("body").css({boxSizing:"border-box"}),wrapper.css({position:"fixed",top:0,left:0,zIndex:0,webkitTransform:"translateZ(0)"}),$YTPlayer.hide()):"static"==YTPlayer.opt.containment.css("position")&&YTPlayer.opt.containment.css({position:"relative"}),YTPlayer.opt.containment.prepend(wrapper),YTPlayer.wrapper=wrapper,playerBox.css({opacity:1}),jQuery.browser.mobile||(playerBox.after(overlay),YTPlayer.overlay=overlay),YTPlayer.isBackground||overlay.on("mouseenter",function(){$YTPlayer.find(".mb_YTPBar").addClass("visible")}).on("mouseleave",function(){$YTPlayer.find(".mb_YTPBar").removeClass("visible")}),ytp.YTAPIReady)setTimeout(function(){jQuery(document).trigger("YTAPIReady")},100);else{jQuery("#YTAPI").remove();var tag=jQuery("<script></script>").attr({src:jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/player_api?v="+jQuery.mbYTPlayer.version,id:"YTAPI"});jQuery("head title").after(tag)}jQuery(document).on("YTAPIReady",function(){YTPlayer.isBackground&&ytp.backgroundIsInited||YTPlayer.isInit||(YTPlayer.isBackground&&YTPlayer.opt.stopMovieOnClick&&jQuery(document).off("mousedown.ytplayer").on("mousedown.ytplayer",function(e){var t=jQuery(e.target);(t.is("a")||t.parents().is("a"))&&$YTPlayer.pauseYTP()}),YTPlayer.isBackground&&(ytp.backgroundIsInited=!0),YTPlayer.opt.autoPlay="undefined"==typeof YTPlayer.opt.autoPlay?YTPlayer.isBackground?!0:!1:YTPlayer.opt.autoPlay,YTPlayer.opt.vol=YTPlayer.opt.vol?YTPlayer.opt.vol:100,jQuery.mbYTPlayer.getDataFromFeed(YTPlayer),jQuery(YTPlayer).on("YTPChanged",function(){return YTPlayer.isInit?void 0:(YTPlayer.isInit=!0,jQuery.browser.mobile&&YTPlayer.canPlayOnMobile?void new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),height:"100%",width:"100%",videoId:YTPlayer.videoID,events:{onReady:function(e){YTPlayer.player=e.target,playerBox.css({opacity:1}),YTPlayer.wrapper.css({opacity:YTPlayer.opt.opacity}),$YTPlayer.optimizeDisplay()},onStateChange:function(){}}}):void new YT.Player(playerID,{videoId:YTPlayer.videoID.toString(),playerVars:playerVars,events:{onReady:function(e){if(YTPlayer.player=e.target,!YTPlayer.isReady){YTPlayer.isReady=!0,YTPlayer.playerEl=YTPlayer.player.getIframe(),$YTPlayer.optimizeDisplay(),YTPlayer.videoID=videoID,jQuery(window).on("resize.YTP",function(){$YTPlayer.optimizeDisplay()}),YTPlayer.opt.showControls&&jQuery(YTPlayer).buildYTPControls();var t=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1;YTPlayer.player.setVolume(0),jQuery(YTPlayer).muteYTPVolume(),jQuery.mbYTPlayer.checkForState(YTPlayer),YTPlayer.checkForStartAt=setInterval(function(){var e=YTPlayer.player.getVideoLoadedFraction()>t/YTPlayer.player.getDuration();YTPlayer.player.getDuration()>0&&YTPlayer.player.getCurrentTime()>=t&&e?(clearInterval(YTPlayer.checkForStartAt),YTPlayer.player.setVolume(0),jQuery(YTPlayer).muteYTPVolume(),"function"==typeof YTPlayer.opt.onReady&&YTPlayer.opt.onReady(YTPlayer),YTPlayer.opt.mute||jQuery(YTPlayer).unmuteYTP(),YTPlayer.player.pauseVideo(),setTimeout(function(){YTPlayer.canTrigger=!0,YTPlayer.opt.autoPlay?($YTPlayer.playYTP(),$YTPlayer.css("background-image","none"),YTPlayer.wrapper.CSSAnimate({opacity:YTPlayer.isAlone?1:YTPlayer.opt.opacity},2e3)):YTPlayer.player.pauseVideo()},100)):(YTPlayer.player.playVideo(),YTPlayer.player.seekTo(t,!0));var i=jQuery.Event("YTPReady");jQuery(YTPlayer).trigger(i)},1e3)}},onStateChange:function(event){if("function"==typeof event.target.getPlayerState){var state=event.target.getPlayerState();if(YTPlayer.state!=state){YTPlayer.state=state;var controls=jQuery("#controlBar_"+YTPlayer.id),eventType;switch(state){case-1:eventType="YTPUnstarted";break;case 0:eventType="YTPEnd";break;case 1:eventType="YTPStart",controls.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.pause),"undefined"!=typeof _gaq&&eval(YTPlayer.opt.gaTrack)&&_gaq.push(["_trackEvent","YTPlayer","Play",YTPlayer.videoTitle||YTPlayer.videoID.toString()]),"undefined"!=typeof ga&&eval(YTPlayer.opt.gaTrack)&&ga("send","event","YTPlayer","play",YTPlayer.videoTitle||YTPlayer.videoID.toString());break;case 2:eventType="YTPPause",controls.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play);break;case 3:jQuery.browser.chrome||YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),eventType="YTPBuffering",jQuery.browser.chrome||YTPlayer.player.setPlaybackQuality(YTPlayer.opt.quality),controls.find(".mb_YTPPlaypause").html(jQuery.mbYTPlayer.controls.play),setTimeout(function(){controls.show(1e3)},2e3);break;case 5:eventType="YTPCued"}var YTPevent=jQuery.Event(eventType);YTPevent.time=YTPlayer.player.time,YTPlayer.canTrigger&&jQuery(YTPlayer).trigger(YTPevent)}}},onPlaybackQualityChange:function(e){var t=e.target.getPlaybackQuality(),i=jQuery.Event("YTPQualityChange");i.quality=t,jQuery(YTPlayer).trigger(i)},onError:function(e){150==e.data&&(console.log("Embedding this video is restricted by Youtube."),YTPlayer.isPlayList&&jQuery(YTPlayer).playNext()),2==e.data&&YTPlayer.isPlayList&&jQuery(YTPlayer).playNext(),"function"==typeof YTPlayer.opt.onError&&YTPlayer.opt.onError($YTPlayer,e)}}}))}))})}})},getDataFromFeed:function(e){jQuery.browser.msie&&jQuery.browser.version<=9?("auto"==e.opt.ratio?e.opt.ratio="16/9":e.opt.ratio,e.hasData||(e.hasData=!0,setTimeout(function(){jQuery(e).trigger("YTPChanged")},100))):(jQuery.getJSON(jQuery.mbYTPlayer.locationProtocol+"//gdata.youtube.com/feeds/api/videos/"+e.videoID+"?v=2&alt=jsonc",function(t){e.dataReceived=!0,e.videoData=t.data,jQuery(e).trigger("YTPChanged");var i=jQuery.Event("YTPData");i.prop={};for(var r in e.videoData)i.prop[r]=e.videoData[r];if(jQuery(e).trigger(i),e.videoTitle=e.videoData.title,"auto"==e.opt.ratio&&(e.opt.ratio=e.videoData.aspectRatio&&"widescreen"===e.videoData.aspectRatio?"16/9":"4/3"),!e.hasData&&(e.hasData=!0,e.isPlayer)){var n=e.videoData.thumbnail.hqDefault;e.opt.containment.css({background:"rgba(0,0,0,0.5) url("+n+") center center",backgroundSize:"cover"})}}),setTimeout(function(){e.dataReceived||e.hasData||(e.hasData=!0,jQuery(e).trigger("YTPChanged"))},1500))},getVideoData:function(){var e=this.get(0);return e.videoData},getVideoID:function(){var e=this.get(0);return e.videoID||!1},setVideoQuality:function(e){var t=this.get(0);jQuery.browser.chrome||t.player.setPlaybackQuality(e)},YTPlaylist:function(e,t,i){var r=this.get(0);r.isPlayList=!0,t&&(e=jQuery.shuffle(e)),r.videoID||(r.videos=e,r.videoCounter=0,r.videoLength=e.length,jQuery(r).data("property",e[0]),jQuery(r).mb_YTPlayer()),"function"==typeof i&&jQuery(r).on("YTPChanged",function(){i(r)}),jQuery(r).on("YTPEnd",function(){jQuery(r).playNext()})},playNext:function(){var e=this.get(0);e.videoCounter++,e.videoCounter>=e.videoLength&&(e.videoCounter=0),jQuery(e.playerEl).css({opacity:0}),jQuery(e).changeMovie(e.videos[e.videoCounter])},playPrev:function(){var e=this.get(0);e.videoCounter--,e.videoCounter<0&&(e.videoCounter=e.videoLength-1),jQuery(e.playerEl).css({opacity:0}),jQuery(e).changeMovie(e.videos[e.videoCounter])},changeMovie:function(e){var t=this.get(0);t.opt.startAt=0,t.opt.stopAt=0,t.opt.mute=!0,e&&jQuery.extend(t.opt,e),t.videoID=getYTPVideoID(t.opt.videoURL).videoID,jQuery(t).pauseYTP();var i=jQuery.browser.msie?1e3:0;jQuery(t.playerEl).CSSAnimate({opacity:0},i),setTimeout(function(){var e=jQuery.browser.chrome?"default":t.opt.quality;jQuery(t).getPlayer().cueVideoByUrl(encodeURI(jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/v/"+t.videoID),1,e),jQuery(t).playYTP(),jQuery(t).one("YTPStart",function(){t.wrapper.CSSAnimate({opacity:t.isAlone?1:t.opt.opacity},1e3),jQuery(t.playerEl).CSSAnimate({opacity:1},i),t.opt.startAt&&t.player.seekTo(t.opt.startAt),jQuery.mbYTPlayer.checkForState(t),t.opt.autoPlay||jQuery(t).pauseYTP()}),t.opt.mute?jQuery(t).muteYTPVolume():jQuery(t).unmuteYTP()},i),t.opt.addRaster?t.overlay.addClass(t.isRetina?"raster retina":"raster"):t.overlay.removeClass("raster").removeClass("retina"),jQuery("#controlBar_"+t.id).remove(),t.opt.showControls&&jQuery(t).buildYTPControls(),jQuery.mbYTPlayer.getDataFromFeed(t),jQuery(t).optimizeDisplay()},getPlayer:function(){return jQuery(this).get(0).player},playerDestroy:function(){var e=this.get(0);ytp.YTAPIReady=!1,ytp.backgroundIsInited=!1,e.isInit=!1,e.videoID=null;var t=e.wrapper;t.remove(),jQuery("#controlBar_"+e.id).remove()},fullscreen:function(real){function RunPrefixMethod(e,t){for(var i,r,n=["webkit","moz","ms","o",""],a=0;a<n.length&&!e[i];){if(i=t,""==n[a]&&(i=i.substr(0,1).toLowerCase()+i.substr(1)),i=n[a]+i,r=typeof e[i],"undefined"!=r)return n=[n[a]],"function"==r?e[i]():e[i];a++}}function launchFullscreen(e){RunPrefixMethod(e,"RequestFullScreen")}function cancelFullscreen(){(RunPrefixMethod(document,"FullScreen")||RunPrefixMethod(document,"IsFullScreen"))&&RunPrefixMethod(document,"CancelFullScreen")}var YTPlayer=this.get(0);"undefined"==typeof real&&(real=YTPlayer.opt.realfullscreen),real=eval(real);var controls=jQuery("#controlBar_"+YTPlayer.id),fullScreenBtn=controls.find(".mb_OnlyYT"),videoWrapper=YTPlayer.isSelf?YTPlayer.opt.containment:YTPlayer.wrapper;if(real){var fullscreenchange=jQuery.browser.mozilla?"mozfullscreenchange":jQuery.browser.webkit?"webkitfullscreenchange":"fullscreenchange";jQuery(document).off(fullscreenchange).on(fullscreenchange,function(){var e=RunPrefixMethod(document,"IsFullScreen")||RunPrefixMethod(document,"FullScreen");e?(jQuery(YTPlayer).setVideoQuality("default"),jQuery(YTPlayer).trigger("YTPFullScreenStart")):(YTPlayer.isAlone=!1,fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),jQuery(YTPlayer).setVideoQuality(YTPlayer.opt.quality),videoWrapper.removeClass("fullscreen"),videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0}),YTPlayer.isBackground?jQuery("body").after(controls):YTPlayer.wrapper.before(controls),jQuery(window).resize(),jQuery(YTPlayer).trigger("YTPFullScreenEnd"))})}YTPlayer.isAlone?(real?cancelFullscreen():(videoWrapper.CSSAnimate({opacity:YTPlayer.opt.opacity},500),videoWrapper.css({zIndex:0})),fullScreenBtn.html(jQuery.mbYTPlayer.controls.onlyYT),YTPlayer.isAlone=!1):(real?(videoWrapper.css({opacity:0}),videoWrapper.addClass("fullscreen"),launchFullscreen(videoWrapper.get(0)),setTimeout(function(){videoWrapper.CSSAnimate({opacity:1},1e3),YTPlayer.wrapper.append(controls),jQuery(YTPlayer).optimizeDisplay(),YTPlayer.player.seekTo(YTPlayer.player.getCurrentTime()+.1,!0)},500)):videoWrapper.css({zIndex:1e4}).CSSAnimate({opacity:1},1e3),fullScreenBtn.html(jQuery.mbYTPlayer.controls.showSite),YTPlayer.isAlone=!0)},playYTP:function(){var e=this.get(0);if("undefined"!=typeof e.player){var t=jQuery("#controlBar_"+e.id),i=t.find(".mb_YTPPlaypause");i.html(jQuery.mbYTPlayer.controls.pause),e.player.playVideo(),e.wrapper.CSSAnimate({opacity:e.isAlone?1:e.opt.opacity},2e3),jQuery(e).on("YTPStart",function(){jQuery(e).css("background-image","none")})}},toggleLoops:function(){var e=this.get(0),t=e.opt;1==t.loop?t.loop=0:(t.startAt?e.player.seekTo(t.startAt):e.player.playVideo(),t.loop=1)},stopYTP:function(){var e=this.get(0),t=jQuery("#controlBar_"+e.id),i=t.find(".mb_YTPPlaypause");i.html(jQuery.mbYTPlayer.controls.play),e.player.stopVideo()},pauseYTP:function(){var e=this.get(0);e.opt;var t=jQuery("#controlBar_"+e.id),i=t.find(".mb_YTPPlaypause");i.html(jQuery.mbYTPlayer.controls.play),e.player.pauseVideo()},seekToYTP:function(e){var t=this.get(0);t.player.seekTo(e,!0)},setYTPVolume:function(e){var t=this.get(0);e||t.opt.vol||0!=t.player.getVolume()?!e&&t.player.getVolume()>0||e&&t.player.getVolume()==e?jQuery(t).muteYTPVolume():t.opt.vol=e:jQuery(t).unmuteYTP(),t.player.setVolume(t.opt.vol)},muteYTP:function(){var e=this.get(0);e.player.mute(),e.player.setVolume(0);var t=jQuery("#controlBar_"+e.id),i=t.find(".mb_YTPMuteUnmute");i.html(jQuery.mbYTPlayer.controls.unmute),jQuery(e).addClass("isMuted"),jQuery(e).trigger("YTPMuted")},unmuteYTP:function(){var e=this.get(0);e.player.unMute(),e.player.setVolume(e.opt.vol);var t=jQuery("#controlBar_"+e.id),i=t.find(".mb_YTPMuteUnmute");i.html(jQuery.mbYTPlayer.controls.mute),jQuery(e).removeClass("isMuted"),jQuery(e).trigger("YTPUnmuted")},manageYTPProgress:function(){var e=this.get(0),t=jQuery("#controlBar_"+e.id),i=t.find(".mb_YTPProgress"),r=t.find(".mb_YTPLoaded"),n=t.find(".mb_YTPseekbar"),a=i.outerWidth(),o=Math.floor(e.player.getCurrentTime()),s=Math.floor(e.player.getDuration()),l=o*a/s,u=0,d=100*e.player.getVideoLoadedFraction();return r.css({left:u,width:d+"%"}),n.css({left:0,width:l}),{totalTime:s,currentTime:o}},buildYTPControls:function(){var YTPlayer=this.get(0),data=YTPlayer.opt;if(data.showYTLogo=data.showYTLogo||data.printUrl,!jQuery("#controlBar_"+YTPlayer.id).length){var controlBar=jQuery("<span/>").attr("id","controlBar_"+YTPlayer.id).addClass("mb_YTPBar").css({whiteSpace:"noWrap",position:YTPlayer.isBackground?"fixed":"absolute",zIndex:YTPlayer.isBackground?1e4:1e3}).hide();YTPlayer.controlBar=controlBar;var buttonBar=jQuery("<div/>").addClass("buttonBar"),playpause=jQuery("<span>"+jQuery.mbYTPlayer.controls.play+"</span>").addClass("mb_YTPPlaypause ytpicon").click(function(){1==YTPlayer.player.getPlayerState()?jQuery(YTPlayer).pauseYTP():jQuery(YTPlayer).playYTP()}),MuteUnmute=jQuery("<span>"+jQuery.mbYTPlayer.controls.mute+"</span>").addClass("mb_YTPMuteUnmute ytpicon").click(function(){0==YTPlayer.player.getVolume()?jQuery(YTPlayer).unmuteYTP():jQuery(YTPlayer).muteYTP()}),idx=jQuery("<span/>").addClass("mb_YTPTime"),vURL=data.videoURL?data.videoURL:"";vURL.indexOf("http")<0&&(vURL=jQuery.mbYTPlayer.locationProtocol+"//www.youtube.com/watch?v="+data.videoURL);var movieUrl=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.ytLogo).addClass("mb_YTPUrl ytpicon").attr("title","view on YouTube").on("click",function(){window.open(vURL,"viewOnYT")}),onlyVideo=jQuery("<span/>").html(jQuery.mbYTPlayer.controls.onlyYT).addClass("mb_OnlyYT ytpicon").on("click",function(){jQuery(YTPlayer).fullscreen(data.realfullscreen)}),progressBar=jQuery("<div/>").addClass("mb_YTPProgress").css("position","absolute").click(function(e){timeBar.css({width:e.clientX-timeBar.offset().left}),YTPlayer.timeW=e.clientX-timeBar.offset().left,controlBar.find(".mb_YTPLoaded").css({width:0});var t=Math.floor(YTPlayer.player.getDuration());YTPlayer["goto"]=timeBar.outerWidth()*t/progressBar.outerWidth(),YTPlayer.player.seekTo(parseFloat(YTPlayer["goto"]),!0),controlBar.find(".mb_YTPLoaded").css({width:0})}),loadedBar=jQuery("<div/>").addClass("mb_YTPLoaded").css("position","absolute"),timeBar=jQuery("<div/>").addClass("mb_YTPseekbar").css("position","absolute");progressBar.append(loadedBar).append(timeBar),buttonBar.append(playpause).append(MuteUnmute).append(idx),data.showYTLogo&&buttonBar.append(movieUrl),(YTPlayer.isBackground||eval(YTPlayer.opt.realfullscreen)&&!YTPlayer.isBackground)&&buttonBar.append(onlyVideo),controlBar.append(buttonBar).append(progressBar),YTPlayer.isBackground?jQuery("body").after(controlBar):(controlBar.addClass("inlinePlayer"),YTPlayer.wrapper.before(controlBar))}},checkForState:function(YTPlayer){var interval=YTPlayer.opt.showControls?10:1e3;clearInterval(YTPlayer.getState),YTPlayer.getState=setInterval(function(){var prog=jQuery(YTPlayer).manageYTPProgress(),$YTPlayer=jQuery(YTPlayer),controlBar=jQuery("#controlBar_"+YTPlayer.id),data=YTPlayer.opt,startAt=YTPlayer.opt.startAt?YTPlayer.opt.startAt:1,stopAt=YTPlayer.opt.stopAt>YTPlayer.opt.startAt?YTPlayer.opt.stopAt:0;if(stopAt=stopAt<YTPlayer.player.getDuration()?stopAt:0,YTPlayer.player.time!=prog.currentTime){var YTPevent=jQuery.Event("YTPTime");YTPevent.time=YTPlayer.player.time,jQuery(YTPlayer).trigger(YTPevent)}if(YTPlayer.player.time=prog.currentTime,0==YTPlayer.player.getVolume()?$YTPlayer.addClass("isMuted"):$YTPlayer.removeClass("isMuted"),
YTPlayer.opt.showControls&&(prog.totalTime?controlBar.find(".mb_YTPTime").html(jQuery.mbYTPlayer.formatTime(prog.currentTime)+" / "+jQuery.mbYTPlayer.formatTime(prog.totalTime)):controlBar.find(".mb_YTPTime").html("-- : -- / -- : --")),eval(YTPlayer.opt.stopMovieOnBlur)&&(document.hasFocus()?document.hasFocus()&&!YTPlayer.hasFocus&&-1!=YTPlayer.state&&0!=YTPlayer.state&&(YTPlayer.hasFocus=!0,$YTPlayer.playYTP()):1==YTPlayer.state&&(YTPlayer.hasFocus=!1,$YTPlayer.pauseYTP())),1==YTPlayer.player.getPlayerState()&&(parseFloat(YTPlayer.player.getDuration()-3)<YTPlayer.player.getCurrentTime()||stopAt>0&&parseFloat(YTPlayer.player.getCurrentTime())>stopAt)){if(YTPlayer.isEnded)return;if(YTPlayer.isEnded=!0,setTimeout(function(){YTPlayer.isEnded=!1},2e3),YTPlayer.isPlayList){clearInterval(YTPlayer.getState);var YTPEnd=jQuery.Event("YTPEnd");return YTPEnd.time=YTPlayer.player.time,void jQuery(YTPlayer).trigger(YTPEnd)}data.loop?YTPlayer.player.seekTo(startAt,!0):(YTPlayer.player.pauseVideo(),YTPlayer.wrapper.CSSAnimate({opacity:0},1e3,function(){var e=jQuery.Event("YTPEnd");if(e.time=YTPlayer.player.time,jQuery(YTPlayer).trigger(e),YTPlayer.player.seekTo(startAt,!0),!YTPlayer.isBackground){var t=YTPlayer.videoData.thumbnail.hqDefault;jQuery(YTPlayer).css({background:"rgba(0,0,0,0.5) url("+t+") center center",backgroundSize:"cover"})}}))}},interval)},formatTime:function(e){var t=Math.floor(e/60),i=Math.floor(e-60*t);return(9>=t?"0"+t:t)+" : "+(9>=i?"0"+i:i)}},jQuery.fn.toggleVolume=function(){var e=this.get(0);return e?e.player.isMuted()?(jQuery(e).unmuteYTP(),!0):(jQuery(e).muteYTP(),!1):void 0},jQuery.fn.optimizeDisplay=function(){var e=this.get(0),t=e.opt,i=jQuery(e.playerEl),r={},n=e.wrapper;r.width=n.outerWidth(),r.height=n.outerHeight();var a=24,o=100,s={};t.optimizeDisplay?(s.width=r.width+r.width*a/100,s.height="16/9"==t.ratio?Math.ceil(9*r.width/16):Math.ceil(3*r.width/4),s.marginTop=-((s.height-r.height)/2),s.marginLeft=-(r.width*(a/2)/100),s.height<r.height&&(s.height=r.height+r.height*a/100,s.width="16/9"==t.ratio?Math.floor(16*r.height/9):Math.floor(4*r.height/3),s.marginTop=-(r.height*(a/2)/100),s.marginLeft=-((s.width-r.width)/2)),s.width+=o,s.height+=o,s.marginTop-=o/2,s.marginLeft-=o/2):(s.width="100%",s.height="100%",s.marginTop=0,s.marginLeft-=0),i.css({width:s.width,height:s.height,marginTop:s.marginTop,marginLeft:s.marginLeft})},jQuery.shuffle=function(e){for(var t=e.slice(),i=t.length,r=i;r--;){var n=parseInt(Math.random()*i),a=t[r];t[r]=t[n],t[n]=a}return t},jQuery.fn.YTPlayer=jQuery.mbYTPlayer.buildPlayer,jQuery.fn.YTPlaylist=jQuery.mbYTPlayer.YTPlaylist,jQuery.fn.playNext=jQuery.mbYTPlayer.playNext,jQuery.fn.playPrev=jQuery.mbYTPlayer.playPrev,jQuery.fn.changeMovie=jQuery.mbYTPlayer.changeMovie,jQuery.fn.getVideoID=jQuery.mbYTPlayer.getVideoID,jQuery.fn.getPlayer=jQuery.mbYTPlayer.getPlayer,jQuery.fn.playerDestroy=jQuery.mbYTPlayer.playerDestroy,jQuery.fn.fullscreen=jQuery.mbYTPlayer.fullscreen,jQuery.fn.buildYTPControls=jQuery.mbYTPlayer.buildYTPControls,jQuery.fn.playYTP=jQuery.mbYTPlayer.playYTP,jQuery.fn.toggleLoops=jQuery.mbYTPlayer.toggleLoops,jQuery.fn.stopYTP=jQuery.mbYTPlayer.stopYTP,jQuery.fn.pauseYTP=jQuery.mbYTPlayer.pauseYTP,jQuery.fn.seekToYTP=jQuery.mbYTPlayer.seekToYTP,jQuery.fn.muteYTP=jQuery.mbYTPlayer.muteYTP,jQuery.fn.unmuteYTP=jQuery.mbYTPlayer.unmuteYTP,jQuery.fn.setYTPVolume=jQuery.mbYTPlayer.setYTPVolume,jQuery.fn.setVideoQuality=jQuery.mbYTPlayer.setVideoQuality,jQuery.fn.manageYTPProgress=jQuery.mbYTPlayer.manageYTPProgress,jQuery.fn.getDataFromFeed=jQuery.mbYTPlayer.getVideoData,jQuery.fn.mb_YTPlayer=jQuery.fn.YTPlayer,jQuery.fn.muteYTPVolume=jQuery.mbYTPlayer.muteYTP,jQuery.fn.unmuteYTPVolume=jQuery.mbYTPlayer.unmuteYTP}(jQuery,ytp),!function(e){"use strict";"function"==typeof define&&define.amd?define(["jquery"],e):e(jQuery)}(function(e){"use strict";function t(e){if(e instanceof Date)return e;if(String(e).match(s))return String(e).match(/^[0-9]*$/)&&(e=Number(e)),String(e).match(/\-/)&&(e=String(e).replace(/\-/g,"/")),new Date(e);throw new Error("Couldn't cast `"+e+"` to a date object.")}function i(e){var t=e.toString().replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");return new RegExp(t)}function r(e){return function(t){var r=t.match(/%(-|!)?[A-Z]{1}(:[^;]+;)?/gi);if(r)for(var a=0,o=r.length;o>a;++a){var s=r[a].match(/%(-|!)?([a-zA-Z]{1})(:[^;]+;)?/),u=i(s[0]),d=s[1]||"",c=s[3]||"",p=null;s=s[2],l.hasOwnProperty(s)&&(p=l[s],p=Number(e[p])),null!==p&&("!"===d&&(p=n(c,p)),""===d&&10>p&&(p="0"+p.toString()),t=t.replace(u,p.toString()))}return t=t.replace(/%%/,"%")}}function n(e,t){var i="s",r="";return e&&(e=e.replace(/(:|;|\s)/gi,"").split(/\,/),1===e.length?i=e[0]:(r=e[0],i=e[1])),1===Math.abs(t)?r:i}var a=100,o=[],s=[];s.push(/^[0-9]*$/.source),s.push(/([0-9]{1,2}\/){2}[0-9]{4}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),s.push(/[0-9]{4}([\/\-][0-9]{1,2}){2}( [0-9]{1,2}(:[0-9]{2}){2})?/.source),s=new RegExp(s.join("|"));var l={Y:"years",m:"months",w:"weeks",d:"days",D:"totalDays",H:"hours",M:"minutes",S:"seconds"},u=function(t,i,r){this.el=t,this.$el=e(t),this.interval=null,this.offset={},this.instanceNumber=o.length,o.push(this),this.$el.data("countdown-instance",this.instanceNumber),r&&(this.$el.on("update.countdown",r),this.$el.on("stoped.countdown",r),this.$el.on("finish.countdown",r)),this.setFinalDate(i),this.start()};e.extend(u.prototype,{start:function(){null!==this.interval&&clearInterval(this.interval);var e=this;this.update(),this.interval=setInterval(function(){e.update.call(e)},a)},stop:function(){clearInterval(this.interval),this.interval=null,this.dispatchEvent("stoped")},toggle:function(){this.interval?this.stop():this.start()},pause:function(){this.stop()},resume:function(){this.start()},remove:function(){this.stop.call(this),o[this.instanceNumber]=null,delete this.$el.data().countdownInstance},setFinalDate:function(e){this.finalDate=t(e)},update:function(){return 0===this.$el.closest("html").length?void this.remove():(this.totalSecsLeft=this.finalDate.getTime()-(new Date).getTime(),this.totalSecsLeft=Math.ceil(this.totalSecsLeft/1e3),this.totalSecsLeft=this.totalSecsLeft<0?0:this.totalSecsLeft,this.offset={seconds:this.totalSecsLeft%60,minutes:Math.floor(this.totalSecsLeft/60)%60,hours:Math.floor(this.totalSecsLeft/60/60)%24,days:Math.floor(this.totalSecsLeft/60/60/24)%7,totalDays:Math.floor(this.totalSecsLeft/60/60/24),weeks:Math.floor(this.totalSecsLeft/60/60/24/7),months:Math.floor(this.totalSecsLeft/60/60/24/30),years:Math.floor(this.totalSecsLeft/60/60/24/365)},void(0===this.totalSecsLeft?(this.stop(),this.dispatchEvent("finish")):this.dispatchEvent("update")))},dispatchEvent:function(t){var i=e.Event(t+".countdown");i.finalDate=this.finalDate,i.offset=e.extend({},this.offset),i.strftime=r(this.offset),this.$el.trigger(i)}}),e.fn.countdown=function(){var t=Array.prototype.slice.call(arguments,0);return this.each(function(){var i=e(this).data("countdown-instance");if(void 0!==i){var r=o[i],n=t[0];u.prototype.hasOwnProperty(n)?r[n].apply(r,t.slice(1)):null===String(n).match(/^[$A-Z_][0-9A-Z_$]*$/i)?(r.setFinalDate.call(r,n),r.start()):e.error("Method %s does not exist on jQuery.countdown".replace(/\%s/gi,n))}else new u(this,t[0],t[1])})}}),!function(e){function t(e){return e.replace(/(:|\.)/g,"\\$1")}var i="1.4.10",r={exclude:[],excludeWithin:[],offset:0,direction:"top",scrollElement:null,scrollTarget:null,beforeScroll:function(){},afterScroll:function(){},easing:"swing",speed:400,autoCoefficent:2},n=function(t){var i=[],r=!1,n=t.dir&&"left"==t.dir?"scrollLeft":"scrollTop";return this.each(function(){if(this!=document&&this!=window){var t=e(this);t[n]()>0?i.push(this):(t[n](1),r=t[n]()>0,r&&i.push(this),t[n](0))}}),i.length||this.each(function(){"BODY"===this.nodeName&&(i=[this])}),"first"===t.el&&i.length>1&&(i=[i[0]]),i};e.fn.extend({scrollable:function(e){var t=n.call(this,{dir:e});return this.pushStack(t)},firstScrollable:function(e){var t=n.call(this,{el:"first",dir:e});return this.pushStack(t)},smoothScroll:function(i){i=i||{};var r=e.extend({},e.fn.smoothScroll.defaults,i),n=e.smoothScroll.filterPath(location.pathname);return this.unbind("click.smoothscroll").bind("click.smoothscroll",function(i){var a=this,o=e(this),s=r.exclude,l=r.excludeWithin,u=0,d=0,c=!0,p={},f=location.hostname===a.hostname||!a.hostname,h=r.scrollTarget||(e.smoothScroll.filterPath(a.pathname)||n)===n,m=t(a.hash);if(r.scrollTarget||f&&h&&m){for(;c&&s.length>u;)o.is(t(s[u++]))&&(c=!1);for(;c&&l.length>d;)o.closest(l[d++]).length&&(c=!1)}else c=!1;c&&(i.preventDefault(),e.extend(p,r,{scrollTarget:r.scrollTarget||m,link:a}),e.smoothScroll(p))}),this}}),e.smoothScroll=function(t,i){var r,n,a,o,s=0,l="offset",u="scrollTop",d={},c={};"number"==typeof t?(r=e.fn.smoothScroll.defaults,a=t):(r=e.extend({},e.fn.smoothScroll.defaults,t||{}),r.scrollElement&&(l="position","static"==r.scrollElement.css("position")&&r.scrollElement.css("position","relative"))),r=e.extend({link:null},r),u="left"==r.direction?"scrollLeft":u,r.scrollElement?(n=r.scrollElement,s=n[u]()):n=e("html, body").firstScrollable(),r.beforeScroll.call(n,r),a="number"==typeof t?t:i||e(r.scrollTarget)[l]()&&e(r.scrollTarget)[l]()[r.direction]||0,d[u]=a+s+r.offset,o=r.speed,"auto"===o&&(o=d[u]||n.scrollTop(),o/=r.autoCoefficent),c={duration:o,easing:r.easing,complete:function(){r.afterScroll.call(r.link,r)}},r.step&&(c.step=r.step),n.length?n.stop().animate(d,c):r.afterScroll.call(r.link,r)},e.smoothScroll.version=i,e.smoothScroll.filterPath=function(e){return e.replace(/^\//,"").replace(/(index|default).[a-zA-Z]{3,4}$/,"").replace(/\/$/,"")},e.fn.smoothScroll.defaults=r}(jQuery),window.mr_parallax=new mr_parallax,function(e,t){function i(t,i,o,s){t[r](a+i,"wheel"==n?o:function(t){!t&&(t=e.event);var i={originalEvent:t,target:t.target||t.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==t.type?0:1,deltaX:0,deltaZ:0,notRealWheel:1,preventDefault:function(){t.preventDefault?t.preventDefault():t.returnValue=!1}};return"mousewheel"==n?(i.deltaY=-1/40*t.wheelDelta,t.wheelDeltaX&&(i.deltaX=-1/40*t.wheelDeltaX)):i.deltaY=t.detail/3,o(i)},s||!1)}var r,n,a="";e.addEventListener?r="addEventListener":(r="attachEvent",a="on"),n="onwheel"in t.createElement("div")?"wheel":"undefined"!=typeof t.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,t,r){i(e,n,t,r),"DOMMouseScroll"==n&&i(e,"MozMousePixelScroll",t,r)}}(window,document);var mr_firstSectionHeight,mr_nav,mr_navOuterHeight,mr_navScrolled=!1,mr_navFixed=!1,mr_outOfSight=!1,mr_floatingProjectSections,mr_scrollTop=0;$(document).ready(function(){"use strict";function e(e){var t,i;return $(e).find('.validate-required[type="checkbox"]').each(function(){$('[name="'+$(this).attr("name")+'"]:checked').length||(i=1,t=$(this).attr("name").replace("[]",""),e.find(".form-error").text("Please tick at least one "+t+" box."))}),$(e).find(".validate-required").each(function(){""===$(this).val()?($(this).addClass("field-error"),i=1):$(this).removeClass("field-error")}),$(e).find(".validate-email").each(function(){/(.+)@(.+){2,}\.(.+){2,}/.test($(this).val())?$(this).removeClass("field-error"):($(this).addClass("field-error"),i=1)}),e.find(".field-error").length||e.find(".form-error").fadeOut(1e3),i}function t(e){return decodeURIComponent((new RegExp("[?|&]"+e+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}if($(".inner-link").each(function(){var e=$(this).attr("href");"#"!==e.charAt(0)&&$(this).removeClass("inner-link")}),$(".inner-link").length&&$(".inner-link").smoothScroll({offset:-55,speed:800}),addEventListener("scroll",function(){mr_scrollTop=window.pageYOffset},!1),$(".background-image-holder").each(function(){var e=$(this).children("img").attr("src");$(this).css("background",'url("'+e+'")'),$(this).children("img").hide(),$(this).css("background-position","initial")}),setTimeout(function(){$(".background-image-holder").each(function(){$(this).addClass("fadeIn")})},200),$('[data-toggle="tooltip"]').tooltip(),$("ul[data-bullet]").each(function(){var e=$(this).attr("data-bullet");$(this).find("li").prepend('<i class="'+e+'"></i>')}),$(".progress-bar").each(function(){$(this).css("width",$(this).attr("data-progress")+"%")}),$("nav").hasClass("fixed")||$("nav").hasClass("absolute")?$("body").addClass("nav-is-overlay"):($(".nav-container").css("min-height",$("nav").outerHeight(!0)),$(window).resize(function(){$(".nav-container").css("min-height",$("nav").outerHeight(!0))}),$(window).width()>768&&$(".parallax:nth-of-type(1) .background-image-holder").css("top",-$("nav").outerHeight(!0)),$(window).width()>768&&$("section.fullscreen:nth-of-type(1)").css("height",$(window).height()-$("nav").outerHeight(!0))),$("nav").hasClass("bg-dark")&&$(".nav-container").addClass("bg-dark"),mr_nav=$("body .nav-container nav:first"),mr_navOuterHeight=$("body .nav-container nav:first").outerHeight(),window.addEventListener("scroll",updateNav,!1),$(".menu > li > ul").each(function(){var e=$(this).offset(),t=e.left+$(this).outerWidth(!0);if(t>$(window).width()&&!$(this).hasClass("mega-menu"))$(this).addClass("make-right");else if(t>$(window).width()&&$(this).hasClass("mega-menu")){var i=$(window).width()-e.left,r=$(this).outerWidth(!0)-i;$(this).css("margin-left",-r)}}),$(".mobile-toggle").click(function(){$(".nav-bar").toggleClass("nav-open"),$(this).toggleClass("active")}),$(".menu li").click(function(e){e||(e=window.event),e.stopPropagation(),$(this).find("ul").length?$(this).toggleClass("toggle-sub"):$(this).parents(".toggle-sub").removeClass("toggle-sub")}),$(".menu li a").click(function(){$(this).hasClass("inner-link")&&$(this).closest(".nav-bar").removeClass("nav-open")}),$(".module.widget-handle").click(function(){$(this).toggleClass("toggle-widget-handle")}),$(".search-widget-handle .search-form input").click(function(e){e||(e=window.event),e.stopPropagation()}),$(".offscreen-toggle").length?$("body").addClass("has-offscreen-nav"):$("body").removeClass("has-offscreen-nav"),$(".offscreen-toggle").click(function(){$(".main-container").toggleClass("reveal-nav"),$("nav").toggleClass("reveal-nav"),$(".offscreen-container").toggleClass("reveal-nav")}),$(".main-container").click(function(){$(this).hasClass("reveal-nav")&&($(this).removeClass("reveal-nav"),$(".offscreen-container").removeClass("reveal-nav"),$("nav").removeClass("reveal-nav"))}),$(".offscreen-container a").click(function(){$(".offscreen-container").removeClass("reveal-nav"),$(".main-container").removeClass("reveal-nav"),$("nav").removeClass("reveal-nav")}),$(".projects").each(function(){var e="";$(this).find(".project").each(function(){var t=$(this).attr("data-filter").split(",");t.forEach(function(t){-1==e.indexOf(t)&&(e+='<li data-filter="'+t+'">'+capitaliseFirstLetter(t)+"</li>")}),$(this).closest(".projects").find("ul.filters").empty().append('<li data-filter="all" class="active">All</li>').append(e)})}),$(".filters li").click(function(){var e=$(this).attr("data-filter");$(this).closest(".filters").find("li").removeClass("active"),$(this).addClass("active"),$(this).closest(".projects").find(".project").each(function(){var t=$(this).data("filter");-1==t.indexOf(e)?$(this).addClass("inactive"):$(this).removeClass("inactive")}),"all"==e&&$(this).closest(".projects").find(".project").removeClass("inactive")}),$(".tweets-feed").each(function(e){$(this).attr("id","tweets-"+e)}).each(function(e){function t(t){for(var i=t.length,r=0,n=document.getElementById("tweets-"+e),a='<ul class="slides">';i>r;)a+="<li>"+t[r]+"</li>",r++;return a+="</ul>",n.innerHTML=a,a}twitterFetcher.fetch($("#tweets-"+e).attr("data-widget-id"),"",5,!0,!0,!0,"",!1,t)}),$(".instafeed").length&&(jQuery.fn.spectragram.accessData={accessToken:"1406933036.fedaafa.feec3d50f5194ce5b705a1f11a107e0b",clientID:"fedaafacf224447e8aef74872d3820a1"},$(".instafeed").each(function(){var e=$(this).attr("data-user-name")+"_";$(this).children("ul").spectragram("getUserFeed",{query:e,max:12})})),$(".flickr-feed").length&&$(".flickr-feed").each(function(){var e=$(this).attr("data-user-id"),t=$(this).attr("data-album-id");$(this).flickrPhotoStream({id:e,setId:t,container:'<li class="masonry-item" />'})}),$(".slider-all-controls").flexslider({start:function(e){e.find(".slides li:first-child").find(".fs-vid-background video").length&&e.find(".slides li:first-child").find(".fs-vid-background video").get(0).play()},after:function(e){e.find(".fs-vid-background video").length&&(e.find("li:not(.flex-active-slide)").find(".fs-vid-background video").length&&e.find("li:not(.flex-active-slide)").find(".fs-vid-background video").get(0).pause(),e.find(".flex-active-slide").find(".fs-vid-background video").length&&e.find(".flex-active-slide").find(".fs-vid-background video").get(0).play())}}),$(".slider-paging-controls").flexslider({animation:"slide",directionNav:!1}),$(".slider-arrow-controls").flexslider({controlNav:!1}),$(".slider-thumb-controls .slides li").each(function(){var e=$(this).find("img").attr("src");$(this).attr("data-thumb",e)}),$(".slider-thumb-controls").flexslider({animation:"slide",controlNav:"thumbnails",directionNav:!0}),$(".logo-carousel").flexslider({minItems:1,maxItems:4,move:1,itemWidth:200,itemMargin:0,animation:"slide",slideshow:!0,slideshowSpeed:3e3,directionNav:!1,controlNav:!1}),$(".lightbox-grid li a").each(function(){var e=$(this).closest(".lightbox-grid").attr("data-gallery-title");$(this).attr("data-lightbox",e)}),$("iframe[data-provider]").each(function(){var e=jQuery(this).attr("data-provider"),t=jQuery(this).attr("data-video-id"),i=jQuery(this).attr("data-autoplay"),r="";"vimeo"==e?(r="http://player.vimeo.com/video/"+t+"?badge=0&title=0&byline=0&title=0&autoplay="+i,$(this).attr("data-src",r)):"youtube"==e?(r="https://www.youtube.com/embed/"+t+"?showinfo=0&autoplay="+i,$(this).attr("data-src",r)):console.log("Only Vimeo and Youtube videos are supported at this time")}),jQuery(".foundry_modal[modal-link]").remove(),$(".foundry_modal").length&&!jQuery(".modal-screen").length){jQuery("<div />").addClass("modal-screen").appendTo("body")}if(jQuery(".foundry_modal").click(function(){jQuery(this).addClass("modal-acknowledged")}),$(".modal-container:not([modal-link])").each(function(e){if(jQuery(this).find("iframe[src]").length){jQuery(this).find(".foundry_modal").addClass("iframe-modal");var t=jQuery(this).find("iframe");t.attr("data-src",t.attr("src")),t.attr("src","")}jQuery(this).find(".btn-modal").attr("modal-link",e),jQuery('.foundry_modal[modal-link="'+e+'"]').length||jQuery(this).find(".foundry_modal").clone().appendTo("body").attr("modal-link",e).prepend(jQuery('<i class="ti-close close-modal">'))}),$(".btn-modal").unbind("click").click(function(){var e=jQuery('.foundry_modal[modal-link="'+jQuery(this).attr("modal-link")+'"]'),t="";if(jQuery(".modal-screen").toggleClass("reveal-modal"),e.find("iframe").length){if("1"===e.find("iframe").attr("data-autoplay"))var t="&autoplay=1";e.find("iframe").attr("src",e.find("iframe").attr("data-src")+t)}return e.toggleClass("reveal-modal"),!1}),$(".foundry_modal[data-time-delay]").each(function(){var e=$(this),t=e.attr("data-time-delay");e.prepend($('<i class="ti-close close-modal">')),"undefined"!=typeof e.attr("data-cookie")?mr_cookies.hasItem(e.attr("data-cookie"))||setTimeout(function(){e.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")},t):setTimeout(function(){e.addClass("reveal-modal"),$(".modal-screen").addClass("reveal-modal")},t)}),$(".foundry_modal[data-hide-after]").each(function(){var e=$(this),t=e.attr("data-hide-after");"undefined"!=typeof e.attr("data-cookie")?mr_cookies.hasItem(e.attr("data-cookie"))||setTimeout(function(){e.hasClass("modal-acknowledged")||(e.removeClass("reveal-modal"),$(".modal-screen").removeClass("reveal-modal"))},t):setTimeout(function(){e.hasClass("modal-acknowledged")||(e.removeClass("reveal-modal"),$(".modal-screen").removeClass("reveal-modal"))},t)}),jQuery(".close-modal:not(.modal-strip .close-modal)").unbind("click").click(function(){var e=jQuery(this).closest(".foundry_modal");e.toggleClass("reveal-modal"),"undefined"!=typeof e.attr("data-cookie")&&mr_cookies.setItem(e.attr("data-cookie"),"true",1/0),e.find("iframe").length&&e.find("iframe").attr("src",""),jQuery(".modal-screen").removeClass("reveal-modal")}),jQuery(".modal-screen").unbind("click").click(function(){jQuery(".foundry_modal.reveal-modal").find("iframe").length&&jQuery(".foundry_modal.reveal-modal").find("iframe").attr("src",""),jQuery(".foundry_modal.reveal-modal").toggleClass("reveal-modal"),jQuery(this).toggleClass("reveal-modal")}),jQuery(document).keyup(function(e){27==e.keyCode&&(jQuery(".foundry_modal").find("iframe").length&&jQuery(".foundry_modal").find("iframe").attr("src",""),jQuery(".foundry_modal").removeClass("reveal-modal"),jQuery(".modal-screen").removeClass("reveal-modal"))}),jQuery(".modal-strip").each(function(){jQuery(this).find(".close-modal").length||jQuery(this).append(jQuery('<i class="ti-close close-modal">'));var e=jQuery(this);"undefined"!=typeof e.attr("data-cookie")?mr_cookies.hasItem(e.attr("data-cookie"))||setTimeout(function(){e.addClass("reveal-modal")},1e3):setTimeout(function(){e.addClass("reveal-modal")},1e3)}),jQuery(".modal-strip .close-modal").click(function(){var e=jQuery(this).closest(".modal-strip");return"undefined"!=typeof e.attr("data-cookie")&&mr_cookies.setItem(e.attr("data-cookie"),"true",1/0),jQuery(this).closest(".modal-strip").removeClass("reveal-modal"),!1}),jQuery(".close-iframe").click(function(){jQuery(this).closest(".modal-video").removeClass("reveal-modal"),jQuery(this).siblings("iframe").attr("src",""),jQuery(this).siblings("video").get(0).pause()}),$(".checkbox-option").on("click",function(){$(this).toggleClass("checked");var e=$(this).find("input");e.prop("checked")===!1?e.prop("checked",!0):e.prop("checked",!1)}),$(".radio-option").click(function(){var e=$(this).hasClass("checked"),t=$(this).find("input").attr("name");e||($('input[name="'+t+'"]').parent().removeClass("checked"),$(this).addClass("checked"),$(this).find("input").prop("checked",!0))}),$(".accordion li").click(function(){$(this).closest(".accordion").hasClass("one-open")?($(this).closest(".accordion").find("li").removeClass("active"),$(this).addClass("active")):$(this).toggleClass("active"),"undefined"!=typeof window.mr_parallax&&setTimeout(mr_parallax.windowLoad,500)}),$(".tabbed-content").each(function(){$(this).append('<ul class="content"></ul>')}),$(".tabs li").each(function(){var e=$(this),t="";e.is(".tabs>li:first-child")&&(t=' class="active"');var i=e.find(".tab-content").detach().wrap("<li"+t+"></li>").parent();e.closest(".tabbed-content").find(".content").append(i)}),$(".tabs li").click(function(){$(this).closest(".tabs").find("li").removeClass("active"),$(this).addClass("active");var e=$(this).index()+1;$(this).closest(".tabbed-content").find(".content>li").removeClass("active"),$(this).closest(".tabbed-content").find(".content>li:nth-of-type("+e+")").addClass("active")}),$("section").closest("body").find(".local-video-container .play-button").click(function(){$(this).siblings(".background-image-holder").removeClass("fadeIn"),$(this).siblings(".background-image-holder").css("z-index",-1),$(this).css("opacity",0),$(this).siblings("video").get(0).play()}),$("section").closest("body").find(".player").each(function(){var e=$(this).closest("section");e.find(".container").addClass("fadeOut");var t=$(this).attr("data-video-id"),i=$(this).attr("data-start-at");$(this).attr("data-property","{videoURL:'http://youtu.be/"+t+"',containment:'self',autoPlay:true, mute:true, startAt:"+i+", opacity:1, showControls:false}")}),$(".player").length&&$(".player").each(function(){var e=$(this).closest("section"),t=e.find(".player");t.YTPlayer(),t.on("YTPStart",function(t){e.find(".container").removeClass("fadeOut"),e.find(".masonry-loader").addClass("fadeOut")})}),$(".map-holder").click(function(){$(this).addClass("interact")}),$(".map-holder").length&&$(window).scroll(function(){$(".map-holder.interact").length&&$(".map-holder.interact").removeClass("interact")}),$(".countdown").length&&$(".countdown").each(function(){var e=$(this).attr("data-date");$(this).countdown(e,function(e){$(this).text(e.strftime("%D days %H:%M:%S"))})}),$("form.form-email, form.form-newsletter").submit(function(t){t.preventDefault?t.preventDefault():t.returnValue=!1;var i,r,n,a,o,s,l,u,d,c=$(this).closest("form.form-email, form.form-newsletter"),p=c.find('button[type="submit"]'),f=0,h=c.attr("original-error");if(r=$(c).find("iframe.mail-list-form"),c.find(".form-error, .form-success").remove(),p.attr("data-text",p.text()),c.append('<div class="form-error" style="display: none;">'+c.attr("data-error")+"</div>"),c.append('<div class="form-success" style="display: none;">'+c.attr("data-success")+"</div>"),u=c.find(".form-error"),d=c.find(".form-success"),c.addClass("attempted-submit"),r.length&&"undefined"!=typeof r.attr("srcdoc")&&""!==r.attr("srcdoc"))if(console.log("Mail list form signup detected."),"undefined"!=typeof h&&h!==!1&&u.html(h),n=$(c).find(".signup-email-field").val(),a=$(c).find(".signup-name-field").val(),o=$(c).find("input.signup-first-name-field").length?$(c).find("input.signup-first-name-field").val():$(c).find(".signup-name-field").val(),s=$(c).find(".signup-last-name-field").val(),1!==e(c)){i=prepareSignup(r),i.find("#mce-EMAIL, #fieldEmail").val(n),i.find("#mce-LNAME, #fieldLastName").val(s),i.find("#mce-FNAME, #fieldFirstName").val(o),i.find("#mce-NAME, #fieldName").val(a),c.removeClass("attempted-submit"),u.fadeOut(200),p.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled");try{$.ajax({url:i.attr("action"),crossDomain:!0,data:i.serialize(),method:"GET",cache:!1,dataType:"json",contentType:"application/json; charset=utf-8",success:function(e){"success"!=e.result&&200!=e.Status?(u.attr("original-error",u.text()),u.html(e.msg).fadeIn(1e3),d.fadeOut(1e3),p.html(p.attr("data-text")).removeAttr("disabled")):(p.html(p.attr("data-text")).removeAttr("disabled"),l=c.attr("success-redirect"),"undefined"!=typeof l&&l!==!1&&""!==l&&(window.location=l),c.find('input[type="text"]').val(""),c.find("textarea").val(""),d.fadeIn(1e3),u.fadeOut(1e3),setTimeout(function(){d.fadeOut(500)},5e3))}})}catch(m){u.attr("original-error",u.text()),u.html(m.message).fadeIn(1e3),d.fadeOut(1e3),setTimeout(function(){u.fadeOut(500)},5e3),p.html(p.attr("data-text")).removeAttr("disabled")}}else u.fadeIn(1e3),setTimeout(function(){u.fadeOut(500)},5e3);else console.log("Send email form detected."),"undefined"!=typeof h&&h!==!1&&u.text(h),f=e(c),1===f?(u.fadeIn(200),setTimeout(function(){u.fadeOut(500)},3e3)):(c.removeClass("attempted-submit"),u.fadeOut(200),p.html(jQuery("<div />").addClass("form-loading")).attr("disabled","disabled"),jQuery.ajax({type:"POST",url:"mail/mail.php",data:c.serialize()+"&url="+window.location.href,success:function(e){p.html(p.attr("data-text")).removeAttr("disabled"),$.isNumeric(e)?parseInt(e)>0&&(l=c.attr("success-redirect"),"undefined"!=typeof l&&l!==!1&&""!==l&&(window.location=l),c.find('input[type="text"]').val(""),c.find("textarea").val(""),c.find(".form-success").fadeIn(1e3),u.fadeOut(1e3),setTimeout(function(){d.fadeOut(500)},5e3)):(u.attr("original-error",u.text()),u.text(e).fadeIn(1e3),d.fadeOut(1e3))},error:function(e,t,i){u.attr("original-error",u.text()),u.text(i).fadeIn(1e3),d.fadeOut(1e3),p.html(p.attr("data-text")).removeAttr("disabled")}}));return!1}),$(".validate-required, .validate-email").on("blur change",function(){e($(this).closest("form"))}),$("form").each(function(){$(this).find(".form-error").length&&$(this).attr("original-error",$(this).find(".form-error").text())}),t("ref")&&$("form.form-email").append('<input type="text" name="referrer" class="hidden" value="'+t("ref")+'"/>'),/Android|iPhone|iPad|iPod|BlackBerry|Windows Phone/i.test(navigator.userAgent||navigator.vendor||window.opera)&&$("section").removeClass("parallax"),$(".disqus-comments").length){var i=$(".disqus-comments").attr("data-shortname");!function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//"+i+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(e)}()}if(document.querySelector("[data-maps-api-key]")&&!document.querySelector(".gMapsAPI")&&$("[data-maps-api-key]").length){var r=document.createElement("script"),n=$("[data-maps-api-key]:first").attr("data-maps-api-key");r.type="text/javascript",r.src="https://maps.googleapis.com/maps/api/js?key="+n+"&callback=initializeMaps",r.className="gMapsAPI",document.body.appendChild(r)}}),$(window).load(function(){"use strict";if($(".masonry").length){var e=document.querySelector(".masonry"),t=new Masonry(e,{itemSelector:".masonry-item"});t.on("layoutComplete",function(){mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0),$(".filters.floating").length&&(setupFloatingProjectFilters(),updateFloatingFilters(),window.addEventListener("scroll",updateFloatingFilters,!1)),$(".masonry").addClass("fadeIn"),$(".masonry-loader").addClass("fadeOut"),$(".masonryFlyIn").length&&masonryFlyIn()}),t.layout()}var i=setInterval(function(){return $(".tweets-slider").find("li.flex-active-slide").length?void clearInterval(i):void($(".tweets-slider").length&&$(".tweets-slider").flexslider({directionNav:!1,controlNav:!1}))},500);mr_firstSectionHeight=$(".main-container section:nth-of-type(1)").outerHeight(!0)}),window.initializeMaps=function(){"undefined"!=typeof google&&"undefined"!=typeof google.maps&&$(".map-canvas[data-maps-api-key]").each(function(){var e,t,i,r=this,n="undefined"!=typeof $(this).attr("data-map-style")?$(this).attr("data-map-style"):!1,a=JSON.parse(n)||[{featureType:"landscape",stylers:[{saturation:-100},{lightness:65},{visibility:"on"}]},{featureType:"poi",stylers:[{saturation:-100},{lightness:51},{visibility:"simplified"}]},{featureType:"road.highway",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"road.arterial",stylers:[{saturation:-100},{lightness:30},{visibility:"on"}]},{featureType:"road.local",stylers:[{saturation:-100},{lightness:40},{visibility:"on"}]},{featureType:"transit",stylers:[{saturation:-100},{visibility:"simplified"}]},{featureType:"administrative.province",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"labels",stylers:[{visibility:"on"},{lightness:-25},{saturation:-100}]},{featureType:"water",elementType:"geometry",stylers:[{hue:"#ffff00"},{lightness:-25},{saturation:-97}]}],o="undefined"!=typeof $(this).attr("data-map-zoom")&&""!==$(this).attr("data-map-zoom")?1*$(this).attr("data-map-zoom"):17,s="undefined"!=typeof $(this).attr("data-latlong")?$(this).attr("data-latlong"):!1,l=s?1*s.substr(0,s.indexOf(",")):!1,u=s?1*s.substr(s.indexOf(",")+1):!1,d=new google.maps.Geocoder,c="undefined"!=typeof $(this).attr("data-address")?$(this).attr("data-address").split(";"):!1,p="We Are Here",f=$(document).width()>766?!0:!1,h={draggable:f,scrollwheel:!1,zoom:o,disableDefaultUI:!0,styles:a};void 0!=$(this).attr("data-marker-title")&&""!=$(this).attr("data-marker-title")&&(p=$(this).attr("data-marker-title")),void 0!=c&&""!=c[0]?d.geocode({address:c[0].replace("[nomarker]","")},function(e,t){if(t==google.maps.GeocoderStatus.OK){var n=new google.maps.Map(r,h);n.setCenter(e[0].geometry.location),c.forEach(function(e){var t;if(i={url:void 0==window.mr_variant?"img/mapmarker.png":"../img/mapmarker.png",size:new google.maps.Size(50,50),scaledSize:new google.maps.Size(50,50)},/(\-?\d+(\.\d+)?),\s*(\-?\d+(\.\d+)?)/.test(e))var r=e.split(","),a=new google.maps.Marker({position:{lat:1*r[0],lng:1*r[1]},map:n,icon:i,title:p,optimised:!1});else e.indexOf("[nomarker]")<0&&(t=new google.maps.Geocoder,t.geocode({address:e.replace("[nomarker]","")},function(e,t){t==google.maps.GeocoderStatus.OK&&(a=new google.maps.Marker({map:n,icon:i,title:p,position:e[0].geometry.location,optimised:!1}))}))})}else console.log("There was a problem geocoding the address.");
}):void 0!=l&&""!=l&&0!=l&&void 0!=u&&""!=u&&0!=u&&(h.center={lat:l,lng:u},e=new google.maps.Map(r,h),t=new google.maps.Marker({position:{lat:l,lng:u},map:e,icon:i,title:p}))})},initializeMaps();var mr_cookies={getItem:function(e){return e?decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null:null},setItem:function(e,t,i,r,n,a){if(!e||/^(?:expires|max\-age|path|domain|secure)$/i.test(e))return!1;var o="";if(i)switch(i.constructor){case Number:o=i===1/0?"; expires=Fri, 31 Dec 9999 23:59:59 GMT":"; max-age="+i;break;case String:o="; expires="+i;break;case Date:o="; expires="+i.toUTCString()}return document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+o+(n?"; domain="+n:"")+(r?"; path="+r:"")+(a?"; secure":""),!0},removeItem:function(e,t,i){return this.hasItem(e)?(document.cookie=encodeURIComponent(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT"+(i?"; domain="+i:"")+(t?"; path="+t:""),!0):!1},hasItem:function(e){return e?new RegExp("(?:^|;\\s*)"+encodeURIComponent(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie):!1},keys:function(){for(var e=document.cookie.replace(/((?:^|\s*;)[^\=]+)(?=;|$)|^\s*|\s*(?:\=[^;]*)?(?:\1|$)/g,"").split(/\s*(?:\=[^;]*)?;\s*/),t=e.length,i=0;t>i;i++)e[i]=decodeURIComponent(e[i]);return e}};